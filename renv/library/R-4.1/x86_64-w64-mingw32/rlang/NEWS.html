
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>rlang 1.0.2 &#8212; 计量经济学</title>
    
  <link href="../../../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/proof.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../_static/jquery.js"></script>
    <script src="../../../../../_static/underscore.js"></script>
    <script src="../../../../../_static/doctools.js"></script>
    <script src="../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">计量经济学</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../intro.html">
   介绍
  </a>
 </li>
</ul>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../lecture3-CN.html">
   1. 最小二乘法：线性代数观点
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../lecture5-CN.html">
   2. 基本渐近理论
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../_sources/renv/library/R-4.1/x86_64-w64-mingw32/rlang/NEWS.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2Frenv/library/R-4.1/x86_64-w64-mingw32/rlang/NEWS.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   rlang 1.0.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-1-0-1">
   rlang 1.0.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-1-0-0">
   rlang 1.0.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#major-changes">
     Major changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#breaking-changes">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fixes-and-features">
     Fixes and features
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tidyeval">
       tidyeval
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rlang-errors">
       rlang errors
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#backtraces">
       Backtraces
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#argument-intake">
       Argument intake
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-apis">
       R APIs
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-12">
   rlang 0.4.12
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-11">
   rlang 0.4.11
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-10">
   rlang 0.4.10
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-9">
   rlang 0.4.9
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-features">
     New features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bugfixes-and-improvements">
     Bugfixes and improvements
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-8">
   rlang 0.4.8
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-7">
   rlang 0.4.7
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-6">
   rlang 0.4.6
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-5">
   rlang 0.4.5
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-4">
   rlang 0.4.4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-3">
   rlang 0.4.3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-2">
   rlang 0.4.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-1">
   rlang 0.4.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-0">
   rlang 0.4.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tidy-evaluation">
     Tidy evaluation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#interpolate-function-inputs-with-the-curly-curly-operator">
       Interpolate function inputs with the curly-curly operator
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#more-robust-env-pronoun">
       More robust
       <code class="docutils literal notranslate">
        <span class="pre">
         .env
        </span>
       </code>
       pronoun
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-functions-and-features">
     New functions and features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#performance">
     Performance
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bugfixes-and-small-improvements">
     Bugfixes and small improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lifecycle">
     Lifecycle
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-3-2">
   rlang 0.3.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-3-1">
   rlang 0.3.1
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#backtrace-fixes">
     Backtrace fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#as-label-and-as-name">
     <code class="docutils literal notranslate">
      <span class="pre">
       as_label()
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       as_name()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minor-fixes-and-features">
     Minor fixes and features
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-3-0">
   rlang 0.3.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#summary">
     Summary
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditions-and-errors">
     Conditions and errors
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tidy-dots">
     Tidy dots
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tidy-eval">
     Tidy eval
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#environments">
     Environments
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calls">
     Calls
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-improvements-and-fixes">
     Other improvements and fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Lifecycle
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#soft-deprecated-functions-and-arguments">
       Soft-deprecated functions and arguments
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id4">
         tidyeval
        </a>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#miscellaneous">
         Miscellaneous
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#deprecated-functions-and-arguments">
       Deprecated functions and arguments
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#defunct-functions-and-arguments">
       Defunct functions and arguments
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#functions-and-arguments-in-the-questioning-stage">
       Functions and arguments in the questioning stage
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-2-2">
   rlang 0.2.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-2-1">
   rlang 0.2.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-2-0">
   rlang 0.2.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     Tidy evaluation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditions">
     Conditions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     Environments
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#various-features">
     Various features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bugfixes">
     Bugfixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#api-changes">
     API changes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id7">
       Breaking changes
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#upcoming-breaking-changes">
       Upcoming breaking changes
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-6">
   rlang 0.1.6
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-4">
   rlang 0.1.4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-2">
   rlang 0.1.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-1">
   rlang 0.1.1
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-functions">
     New functions:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ui-improvements">
     UI improvements:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id8">
     Bugfixes:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-0">
   rlang 0.1.0
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>rlang 1.0.2</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   rlang 1.0.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-1-0-1">
   rlang 1.0.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-1-0-0">
   rlang 1.0.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#major-changes">
     Major changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#breaking-changes">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fixes-and-features">
     Fixes and features
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tidyeval">
       tidyeval
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#rlang-errors">
       rlang errors
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#backtraces">
       Backtraces
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#argument-intake">
       Argument intake
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#r-apis">
       R APIs
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-12">
   rlang 0.4.12
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-11">
   rlang 0.4.11
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-10">
   rlang 0.4.10
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-9">
   rlang 0.4.9
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-features">
     New features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bugfixes-and-improvements">
     Bugfixes and improvements
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-8">
   rlang 0.4.8
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-7">
   rlang 0.4.7
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-6">
   rlang 0.4.6
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-5">
   rlang 0.4.5
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-4">
   rlang 0.4.4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-3">
   rlang 0.4.3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-2">
   rlang 0.4.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-1">
   rlang 0.4.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-4-0">
   rlang 0.4.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tidy-evaluation">
     Tidy evaluation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#interpolate-function-inputs-with-the-curly-curly-operator">
       Interpolate function inputs with the curly-curly operator
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#more-robust-env-pronoun">
       More robust
       <code class="docutils literal notranslate">
        <span class="pre">
         .env
        </span>
       </code>
       pronoun
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-functions-and-features">
     New functions and features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#performance">
     Performance
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bugfixes-and-small-improvements">
     Bugfixes and small improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lifecycle">
     Lifecycle
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-3-2">
   rlang 0.3.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-3-1">
   rlang 0.3.1
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#backtrace-fixes">
     Backtrace fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#as-label-and-as-name">
     <code class="docutils literal notranslate">
      <span class="pre">
       as_label()
      </span>
     </code>
     and
     <code class="docutils literal notranslate">
      <span class="pre">
       as_name()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minor-fixes-and-features">
     Minor fixes and features
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-3-0">
   rlang 0.3.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#summary">
     Summary
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditions-and-errors">
     Conditions and errors
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tidy-dots">
     Tidy dots
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tidy-eval">
     Tidy eval
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#environments">
     Environments
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#calls">
     Calls
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-improvements-and-fixes">
     Other improvements and fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Lifecycle
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#soft-deprecated-functions-and-arguments">
       Soft-deprecated functions and arguments
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#id4">
         tidyeval
        </a>
       </li>
       <li class="toc-h4 nav-item toc-entry">
        <a class="reference internal nav-link" href="#miscellaneous">
         Miscellaneous
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#deprecated-functions-and-arguments">
       Deprecated functions and arguments
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#defunct-functions-and-arguments">
       Defunct functions and arguments
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#functions-and-arguments-in-the-questioning-stage">
       Functions and arguments in the questioning stage
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-2-2">
   rlang 0.2.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-2-1">
   rlang 0.2.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-2-0">
   rlang 0.2.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     Tidy evaluation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#conditions">
     Conditions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     Environments
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#various-features">
     Various features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bugfixes">
     Bugfixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#api-changes">
     API changes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id7">
       Breaking changes
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#upcoming-breaking-changes">
       Upcoming breaking changes
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-6">
   rlang 0.1.6
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-4">
   rlang 0.1.4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-2">
   rlang 0.1.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-1">
   rlang 0.1.1
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-functions">
     New functions:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#ui-improvements">
     UI improvements:
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id8">
     Bugfixes:
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#rlang-0-1-0">
   rlang 0.1.0
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="rlang-1-0-2">
<h1>rlang 1.0.2<a class="headerlink" href="#rlang-1-0-2" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Backtraces of parent errors are now reused on rethrow. This avoids
capturing the same backtrace twice and solves consistency problems
by making sure both errors in a chain have the same backtrace.</p></li>
<li><p>Fixed backtrace oversimplification when <code class="docutils literal notranslate"><span class="pre">cnd</span></code> is a base error in
<code class="docutils literal notranslate"><span class="pre">abort(parent</span> <span class="pre">=</span> <span class="pre">cnd)</span></code>.</p></li>
<li><p>Internal errors thrown with <code class="docutils literal notranslate"><span class="pre">abort(.internal</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code> now mention
the name of the package the error should be reported to.</p></li>
<li><p>Backtraces are now separated from error messages with a <code class="docutils literal notranslate"><span class="pre">---</span></code> ruler
line (#1368).</p></li>
<li><p>The internal bullet formatting routine now ignores unknown names
(#1364). This makes it consistent with the cli package, increases
resilience against hard-to-detect errors, and increases forward
compatibility.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> and friends no longer calls non-existent functions
(e.g. <code class="docutils literal notranslate"><span class="pre">cli::format_error()</span></code> or <code class="docutils literal notranslate"><span class="pre">cli::format_warning</span></code>) when the
installed version of cli is too old (#1367, tidyverse/dplyr#6189).</p></li>
<li><p>Fixed an OOB subsetting error in <code class="docutils literal notranslate"><span class="pre">abort()</span></code>.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-1-0-1">
<h1>rlang 1.0.1<a class="headerlink" href="#rlang-1-0-1" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">rlang_call_format_srcrefs</span></code> global option (#1349). Similar to
<code class="docutils literal notranslate"><span class="pre">rlang_trace_format_srcrefs</span></code>, this option allows turning off the
display of srcrefs in error calls. This can be useful for
reproducibility but note that srcrefs are already disabled
within testthat by default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort(parent</span> <span class="pre">=</span> <span class="pre">NA)</span></code> is now supported to indicate an unchained
rethrow. This helps <code class="docutils literal notranslate"><span class="pre">abort()</span></code> detect the condition handling context
to create simpler backtraces where this context is hidden by
default.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">parent</span></code> is supplied, <code class="docutils literal notranslate"><span class="pre">abort()</span></code> now loops over callers to
detect the condition handler frame. This makes it easier to wrap or
extract condition handlers in functions without supplying <code class="docutils literal notranslate"><span class="pre">.frame</span></code>.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">parent</span></code> is supplied and <code class="docutils literal notranslate"><span class="pre">call</span></code> points to the condition setup
frame (e.g. <code class="docutils literal notranslate"><span class="pre">withCallingHandlers()</span></code> or <code class="docutils literal notranslate"><span class="pre">try_fetch()</span></code>), <code class="docutils literal notranslate"><span class="pre">call</span></code> is
replaced with the caller of that setup frame. This provides a more
helpful default call.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_call()</span></code> is now implemented in C for performance.</p></li>
<li><p>Fixed performance regression in <code class="docutils literal notranslate"><span class="pre">trace_back()</span></code>.</p></li>
<li><p>Fixed a partial matching issue with <code class="docutils literal notranslate"><span class="pre">header</span></code>, <code class="docutils literal notranslate"><span class="pre">body</span></code>, and <code class="docutils literal notranslate"><span class="pre">footer</span></code>
condition fields.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eval_tidy()</span></code> calls are no longer mentioned in error messages.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-1-0-0">
<h1>rlang 1.0.0<a class="headerlink" href="#rlang-1-0-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="major-changes">
<h2>Major changes<a class="headerlink" href="#major-changes" title="Permalink to this headline">¶</a></h2>
<p>This release focuses on the rlang errors framework and features
extensive changes to the display of error messages.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> now displays errors as fully bulleted lists. Error headers
are displayed with a <code class="docutils literal notranslate"><span class="pre">!</span></code> prefix. See
<a class="reference external" href="https://rlang.r-lib.org/reference/topic-condition-customisation.html">https://rlang.r-lib.org/reference/topic-condition-customisation.html</a>
to customise the display of error messages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> now displays a full chain of messages when errors are
chained with the <code class="docutils literal notranslate"><span class="pre">parent</span></code> argument. Following this change, you
should update dplyr to version 1.0.8 to get proper error messages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> now displays function calls in which a message originated
by default. We have refrained from showing these calls until now to
avoid confusing messages when an error is thrown from a helper
function that isn’t relevant to users.</p>
<p>To help with these cases, <code class="docutils literal notranslate"><span class="pre">abort()</span></code> now takes a <code class="docutils literal notranslate"><span class="pre">call</span></code> argument that
you can set to <code class="docutils literal notranslate"><span class="pre">caller_env()</span></code> or <code class="docutils literal notranslate"><span class="pre">parent.frame()</span></code> when used in a
helper function. The function call corresponding to this environment
is retrieved and stored in the condition.</p>
</li>
<li><p>cli formatting is now supported. Use <code class="docutils literal notranslate"><span class="pre">cli::cli_abort()</span></code> to get
advanced formatting of error messages, including indented bulleted
lists. See <a class="reference external" href="https://rlang.r-lib.org/reference/topic-condition-formatting.html">https://rlang.r-lib.org/reference/topic-condition-formatting.html</a>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">try_fetch()</span></code> function for error handling. We recommend to use
it for chaining errors. It mostly works like <code class="docutils literal notranslate"><span class="pre">tryCatch()</span></code> with a few
important differences.</p>
<ul class="simple">
<li><p>Compared to <code class="docutils literal notranslate"><span class="pre">tryCatch()</span></code>, <code class="docutils literal notranslate"><span class="pre">try_fetch()</span></code> preserves the call
stack. This allows full backtrace capture and allows <code class="docutils literal notranslate"><span class="pre">recover()</span></code>
to reach the error site.</p></li>
<li><p>Compared to <code class="docutils literal notranslate"><span class="pre">withCallingHandler()</span></code>, <code class="docutils literal notranslate"><span class="pre">try_fetch()</span></code> is able to
handle stack overflow errors (this requires R 4.2, unreleased at
the time of writing).</p></li>
</ul>
</li>
<li><p>The tidy eval documentation has been fully rewritten to reflect
current practices. Access it through the “Tidy evaluation” and
“Metaprogramming” menus on <a class="reference external" href="https://rlang.r-lib.org">https://rlang.r-lib.org</a>.</p></li>
</ul>
</div>
<div class="section" id="breaking-changes">
<h2>Breaking changes<a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.data</span></code> object exported by rlang now fails when subsetted
instead of returning <code class="docutils literal notranslate"><span class="pre">NULL</span></code>. This new error helps you detect when
<code class="docutils literal notranslate"><span class="pre">.data</span></code> is used in the wrong context.</p>
<p>We’ve noticed several packages failing after this change because
they were using <code class="docutils literal notranslate"><span class="pre">.data</span></code> outside of a data-masking context. For
instance the <code class="docutils literal notranslate"><span class="pre">by</span></code> argument of <code class="docutils literal notranslate"><span class="pre">dplyr::join()</span></code> is not data-masked.
Previously <code class="docutils literal notranslate"><span class="pre">dplyr::join(by</span> <span class="pre">=</span> <span class="pre">.data$foo)</span></code> would silently be
interpreted as <code class="docutils literal notranslate"><span class="pre">dplyr::join(by</span> <span class="pre">=</span> <span class="pre">NULL)</span></code>. This is now an error.</p>
<p>Another issue is using <code class="docutils literal notranslate"><span class="pre">.data</span></code> inside <code class="docutils literal notranslate"><span class="pre">ggplot2::labs(...)</span></code>. This is
not allowed since <code class="docutils literal notranslate"><span class="pre">labs()</span></code> isn’t data-masked.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_name()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> instead of <code class="docutils literal notranslate"><span class="pre">&quot;::&quot;</span></code> for calls of the
form <code class="docutils literal notranslate"><span class="pre">foo::bar</span></code>.</p>
<p>We’ve noticed some packages do not check for <code class="docutils literal notranslate"><span class="pre">NULL</span></code> results from
<code class="docutils literal notranslate"><span class="pre">call_name()</span></code>. Note that many complex calls such as <code class="docutils literal notranslate"><span class="pre">foo()()</span></code>,
<code class="docutils literal notranslate"><span class="pre">foo$bar()</span></code> don’t have a “name” and cause a <code class="docutils literal notranslate"><span class="pre">NULL</span></code> result. This is
why you should always check for <code class="docutils literal notranslate"><span class="pre">NULL</span></code> results when using
<code class="docutils literal notranslate"><span class="pre">call_name()</span></code>.</p>
<p>We’ve added the function <code class="docutils literal notranslate"><span class="pre">is_call_simple()</span></code> to make it easier to
work safely with <code class="docutils literal notranslate"><span class="pre">call_name()</span></code>. The invariant is that <code class="docutils literal notranslate"><span class="pre">call_name()</span></code>
always returns a string when <code class="docutils literal notranslate"><span class="pre">is_call_simple()</span></code> returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>.
Conversely it always returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> when <code class="docutils literal notranslate"><span class="pre">is_call_simple()</span></code> retuns
<code class="docutils literal notranslate"><span class="pre">FALSE</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_expression()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> for manually constructed
expressions that can’t be created by the parser. It used to return
<code class="docutils literal notranslate"><span class="pre">TRUE</span></code> for any calls, including those that contain injected objects.</p>
<p>Consider using <code class="docutils literal notranslate"><span class="pre">is_call()</span></code> or just remove the expression check. In
many cases it is fine letting all objects go through when an
expression is expected. For instance you can inject objects directly
inside dplyr arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>x &lt;- seq_len(nrow(data))
dplyr::mutate(data, col = !!x)
</pre></div>
</div>
</li>
<li><p>If a string is supplied to <code class="docutils literal notranslate"><span class="pre">as_function()</span></code> instead of an object
(function or formula), the function is looked up in the global
environment instead of the calling environment. In general, passing
a function name as a string is brittle. It is easy to forget to pass
the user environment to <code class="docutils literal notranslate"><span class="pre">as_function()</span></code> and sometimes there is no
obvious user environment. The support for strings should be
considered a convenience for end users only, not for programmers.</p>
<p>Since environment forwarding is easy to mess up, and since the
feature is aimed towards end users, <code class="docutils literal notranslate"><span class="pre">as_function()</span></code> now defaults to
the global environment. Supply an environment explicitly if that is
not correct in your case.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_handlers()</span></code>, <code class="docutils literal notranslate"><span class="pre">call_fn()</span></code>, and <code class="docutils literal notranslate"><span class="pre">friendly_type()</span></code> are deprecated.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">action</span></code> argument of <code class="docutils literal notranslate"><span class="pre">check_dots_used()</span></code>, <code class="docutils literal notranslate"><span class="pre">check_dots_unnamed()</span></code>,
and <code class="docutils literal notranslate"><span class="pre">check_dots_empty()</span></code> is deprecated in favour of the new <code class="docutils literal notranslate"><span class="pre">error</span></code>
argument which takes an error handler.</p></li>
<li><p>Many functions deprecated deprecated in rlang 0.2.0 and 0.3.0 have
been removed from the package.</p></li>
</ul>
</div>
<div class="section" id="fixes-and-features">
<h2>Fixes and features<a class="headerlink" href="#fixes-and-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="tidyeval">
<h3>tidyeval<a class="headerlink" href="#tidyeval" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">englue()</span></code> operator to allow string-embracing outside of dynamic
dots (#1172).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">data_sym()</span></code> and <code class="docutils literal notranslate"><span class="pre">data_syms()</span></code> functions to create calls of the
form <code class="docutils literal notranslate"><span class="pre">.data$foo</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.data</span></code> now fails early when it is subsetted outside of a data mask
context. This provides a more informative error message (#804, #1133).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_label()</span></code> now better handles calls to infix operators (#956,
r-lib/testthat#1432). This change improves auto-labelled expressions
in data-masking functions like <code class="docutils literal notranslate"><span class="pre">tibble()</span></code>, <code class="docutils literal notranslate"><span class="pre">mutate()</span></code>, etc.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">{{</span></code> operator is now detected more strictly (#1087). If
additional arguments are supplied through <code class="docutils literal notranslate"><span class="pre">{</span></code>, it is no longer
interpreted as an injection operator.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.ignore_empty</span></code> argument of <code class="docutils literal notranslate"><span class="pre">enexprs()</span></code> and <code class="docutils literal notranslate"><span class="pre">enquos()</span></code> no longer
treats named arguments supplied through <code class="docutils literal notranslate"><span class="pre">...</span></code> as empty, consistently
with <code class="docutils literal notranslate"><span class="pre">exprs()</span></code> and <code class="docutils literal notranslate"><span class="pre">quos()</span></code> (#1229).</p></li>
<li><p>Fixed a hang when a quosure inheriting from a data mask is evaluated
in the mask again.</p></li>
<li><p>Fixed performance issue when splicing classes that explicitly
inherit from list with <code class="docutils literal notranslate"><span class="pre">!!!</span></code> (#1140, r-lib/vctrs#1170).</p></li>
<li><p>Attributes of quosure lists are no longer modified by side effect
(#1142).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enquo()</span></code>, <code class="docutils literal notranslate"><span class="pre">enquos()</span></code> and variants now support numbered dots like
<code class="docutils literal notranslate"><span class="pre">..1</span></code> (#1137).</p></li>
<li><p>Fixed a bug in the AST rotation algorithm that caused the <code class="docutils literal notranslate"><span class="pre">!!</span></code>
operator to unexpectedly mutate injected objects (#1103).</p></li>
<li><p>Fixed AST rotation issue with <code class="docutils literal notranslate"><span class="pre">!!</span></code> involving binary operators (#1125).</p></li>
</ul>
</div>
<div class="section" id="rlang-errors">
<h3>rlang errors<a class="headerlink" href="#rlang-errors" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">try_fetch()</span></code> is a flexible alternative to both <code class="docutils literal notranslate"><span class="pre">tryCatch()</span></code> and
<code class="docutils literal notranslate"><span class="pre">withCallingHandlers()</span></code> (#503). It is also more efficient than
<code class="docutils literal notranslate"><span class="pre">tryCatch()</span></code> and creates leaner backtraces.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">cnd_inherits()</span></code> function to detect a class in a chain of errors
(#1293).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">global_entrace()</span></code> function, a user-friendly helper for
configuring errors in your RProfile. Call it to enrich all base
errors and warnings with an rlang backtrace. This enables
<code class="docutils literal notranslate"><span class="pre">last_error()</span></code>, <code class="docutils literal notranslate"><span class="pre">last_warnings()</span></code>, <code class="docutils literal notranslate"><span class="pre">last_messages()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">backtrace_on_error</span></code> support for all conditions.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">global_handle()</span></code> function to install a default configuration of
error handlers. This currently calls <code class="docutils literal notranslate"><span class="pre">global_entrace()</span></code> and
<code class="docutils literal notranslate"><span class="pre">global_prompt_install()</span></code>. Expect more to come.</p></li>
<li><p>The “Error:” part of error messages is now printed by rlang instead
of R. This introduces several cosmetic and informative changes in
errors thrown by <code class="docutils literal notranslate"><span class="pre">abort()</span></code>:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">call</span></code> field of error messages is now displayed, as is the
default in <code class="docutils literal notranslate"><span class="pre">base::stop()</span></code>. The call is only displayed if it is a
simple expression (e.g. no inlined function) and the arguments are
not displayed to avoid distracting from the error message. The
message is formatted with the tidyverse style (<code class="docutils literal notranslate"><span class="pre">code</span></code> formatting
by the cli package if available).</p></li>
<li><p>The source location is displayed (as in <code class="docutils literal notranslate"><span class="pre">base::stop()</span></code>) if <code class="docutils literal notranslate"><span class="pre">call</span></code>
carries a source reference. Source locations are not displayed
when testthat is running to avoid brittle snapshots.</p></li>
<li><p>Error headers are always displayed on their own line, with a <code class="docutils literal notranslate"><span class="pre">&quot;!&quot;</span></code>
bullet prefix.</p></li>
</ul>
<p>See <a class="reference external" href="https://rlang.r-lib.org/reference/topic-condition-customisation.html">https://rlang.r-lib.org/reference/topic-condition-customisation.html</a>
to customise this new display.</p>
</li>
<li><p>The display of chained errors created with the <code class="docutils literal notranslate"><span class="pre">parent</span></code> argument of
<code class="docutils literal notranslate"><span class="pre">abort()</span></code> has been improved. Chains of errors are now displayed at
throw time with the error prefix “Caused by error:”.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">print()</span></code> method of rlang errors (commonly invoked with
<code class="docutils literal notranslate"><span class="pre">last_error()</span></code>) has been improved:</p>
<ul class="simple">
<li><p>Display calls if present.</p></li>
<li><p>Chained errors are displayed more clearly.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">inform()</span></code> and <code class="docutils literal notranslate"><span class="pre">warn()</span></code> messages can now be silenced with the global
options <code class="docutils literal notranslate"><span class="pre">rlib_message_verbosity</span></code> and <code class="docutils literal notranslate"><span class="pre">rlib_warning_verbosity</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> now outputs error messages to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> in interactive
sessions, following the same approach as <code class="docutils literal notranslate"><span class="pre">inform()</span></code>.</p></li>
<li><p>Errors, warnings, and messages generated from rlang are now
formatted with cli. This means in practice that long lines are
width-wrapped to the terminal size and user themes are applied.
This is currently only the case for rlang messages.</p>
<p>This special formatting is not applied when <code class="docutils literal notranslate"><span class="pre">abort()</span></code>, <code class="docutils literal notranslate"><span class="pre">warn()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">inform()</span></code> are called from another namespace than rlang.
See <a class="reference external" href="https://rlang.r-lib.org/reference/topic-condition-formatting.html">https://rlang.r-lib.org/reference/topic-condition-formatting.html</a>
if you’d like to use cli to format condition messages in your
package.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_error_bullets()</span></code> (used as a fallback instead of cli) now
treats:</p>
<ul class="simple">
<li><p>Unnamed elements as unindented line breaks (#1130)</p></li>
<li><p>Elements named <code class="docutils literal notranslate"><span class="pre">&quot;v&quot;</span></code> as green ticks (&#64;rossellhayes)</p></li>
<li><p>Elements named <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code> as indented line breaks</p></li>
<li><p>Elements named <code class="docutils literal notranslate"><span class="pre">&quot;*&quot;</span></code> as normal bullets</p></li>
<li><p>Elements named <code class="docutils literal notranslate"><span class="pre">&quot;!&quot;</span></code> as warning bullets</p></li>
</ul>
<p>For convenience, a fully unnamed vector is interpreted as a vector
of <code class="docutils literal notranslate"><span class="pre">&quot;*&quot;</span></code> bullets.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">.internal</span></code> argument. When set to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, a footer
bullet is added to <code class="docutils literal notranslate"><span class="pre">message</span></code> to let the user know that the error is
internal and that they should report it to the package authors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code>, <code class="docutils literal notranslate"><span class="pre">warn()</span></code>, and <code class="docutils literal notranslate"><span class="pre">inform()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">body</span></code> argument to supply
additional bullets in the error message.</p></li>
<li><p>rlang conditions now have <code class="docutils literal notranslate"><span class="pre">as.character()</span></code> methods. Use this generic
on conditions to generate a whole error message, including the
<code class="docutils literal notranslate"><span class="pre">Error:</span></code> prefix. These methods are implemented as wrappers around
<code class="docutils literal notranslate"><span class="pre">cnd_message()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">header</span></code> and <code class="docutils literal notranslate"><span class="pre">footer</span></code> methods can now be stored as closures in
condition fields of the same name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_message()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">prefix</span></code> argument to print the message with
a full prefix, including <code class="docutils literal notranslate"><span class="pre">call</span></code> field if present and parent messages
if the condition is chained.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_message()</span></code> gains an <code class="docutils literal notranslate"><span class="pre">inherit</span></code> argument to control whether to
print the messages of parent errors.</p></li>
<li><p>Condition constructors now check for duplicate field names (#1268).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_footer()</span></code> now returns the <code class="docutils literal notranslate"><span class="pre">footer</span></code> field by default, if any.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">warn()</span></code> and <code class="docutils literal notranslate"><span class="pre">inform()</span></code> now signal conditions of classes
<code class="docutils literal notranslate"><span class="pre">&quot;rlang_warning&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;rlang_message&quot;</span></code> respectively.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">body</span></code> field of error conditions can now be a character vector.</p></li>
<li><p>The error returned by <code class="docutils literal notranslate"><span class="pre">last_error()</span></code> is now stored on the search
path as the <code class="docutils literal notranslate"><span class="pre">.Last.error</span></code> binding of the <code class="docutils literal notranslate"><span class="pre">&quot;org:r-lib&quot;</span></code>
environment. This is consistent with how the processx package
records error conditions. Printing the <code class="docutils literal notranslate"><span class="pre">.Last.error</span></code> object is now
equivalent to running <code class="docutils literal notranslate"><span class="pre">last_error()</span></code>.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">is_error()</span></code>, <code class="docutils literal notranslate"><span class="pre">is_warning()</span></code>, and <code class="docutils literal notranslate"><span class="pre">is_message()</span></code> predicates (#1220).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interrupt()</span></code> no longer fails when interrupts are suspended (#1224).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">warn()</span></code> now temporarily sets the <code class="docutils literal notranslate"><span class="pre">warning.length</span></code> global option to
the maximum value (8170). The default limit (1000 characters) is
especially easy to hit when the message contains a lot of ANSI
escapes, as created by the crayon or cli packages (#1211).</p></li>
</ul>
</div>
<div class="section" id="backtraces">
<h3>Backtraces<a class="headerlink" href="#backtraces" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">entrace()</span></code> and <code class="docutils literal notranslate"><span class="pre">global_entrace()</span></code> now log warnings and messages
with backtraces attached. Run <code class="docutils literal notranslate"><span class="pre">last_warnings()</span></code> or <code class="docutils literal notranslate"><span class="pre">last_messages()</span></code>
to inspect the warnings or messages emitted during the last command.</p></li>
<li><p>Internal errors now include a winch backtrace if installed. The user
is invited to install it if not installed.</p></li>
<li><p>Display of rlang backtraces in dynamic reports (knitted documents
and RStudio notebooks) is now controlled by the
<code class="docutils literal notranslate"><span class="pre">rlang_backtrace_on_error_report</span></code> option. By default, nothing is
displayed in interactive sessions. In non-interactive sessions, a
simplified backtrace is displayed instead of a full backtrace</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">last_error()</span></code> reminder is no longer displayed in RStudio
notebooks.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">knitr::sew()</span></code> method is registered for <code class="docutils literal notranslate"><span class="pre">rlang_error</span></code>. This makes
it possible to consult <code class="docutils literal notranslate"><span class="pre">last_error()</span></code> (the call must occur in a
different chunk than the error) and to set
<code class="docutils literal notranslate"><span class="pre">rlang_backtrace_on_error</span></code> global options in knitr to display a
backtrace on error.</p>
<p>If you show rlang backtraces in a knitted document, also set this in
a hidden chunk to trim the knitr context from the backtraces:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">options</span><span class="p">(</span>
  <span class="n">rlang_trace_top_env</span> <span class="o">=</span> <span class="n">environment</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
<p>This change replaces an ad hoc mechanism that caused bugs in corner
cases (#1205).</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rlang_trace_top_env</span></code> global option for <code class="docutils literal notranslate"><span class="pre">trace_back()</span></code> now
detects when backtraces are created within knitr. If the option is
not set, its default value becomes <code class="docutils literal notranslate"><span class="pre">knitr::knit_global()</span></code> when knitr
is in progress (as determined from <code class="docutils literal notranslate"><span class="pre">knitr.in.progress</span></code> global
option). This prevents the knitr evaluation context from appearing
in the backtraces (#932).</p></li>
<li><p>Namespace changes are now emboldened in backtraces (#946).</p></li>
<li><p>Functions defined in the global environments or in local execution
environments are now displayed with a space separator in backtraces
instead of <code class="docutils literal notranslate"><span class="pre">::</span></code> and <code class="docutils literal notranslate"><span class="pre">:::</span></code>. This avoids making it seem like these
frame calls are valid R code ready to be typed in (#902).</p></li>
<li><p>Backtraces no longer contain inlined objects to avoid performance
issues in edge cases (#1069, r-lib/testthat#1223).</p></li>
<li><p>External backtraces in error chains are now separately displayed (#1098).</p></li>
<li><p>Trace capture now better handles wrappers of calling handler in case
of rethrown chained errors.</p></li>
<li><p>Backtraces now print dangling srcrefs (#1206). Paths are shortened
to show only three components (two levels of folder and the file).</p></li>
<li><p>The root symbol in backtraces is now slightly different so that it
can’t be confused with a prompt character (#1207).</p></li>
</ul>
</div>
<div class="section" id="argument-intake">
<h3>Argument intake<a class="headerlink" href="#argument-intake" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">arg_match()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">multiple</span></code> argument for cases where zero or
several matches are allowed (#1281).</p></li>
<li><p>New function <code class="docutils literal notranslate"><span class="pre">check_required()</span></code> to check that an argument is
supplied. It produces a more friendly error message than <code class="docutils literal notranslate"><span class="pre">force()</span></code>
(#1118).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_dots_empty()</span></code>, <code class="docutils literal notranslate"><span class="pre">check_dots_unused()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">check_dots_unnamed()</span></code> have been moved from ellipsis to rlang. The
ellipsis package is deprecated and will eventually be archived.</p>
<p>We have added <code class="docutils literal notranslate"><span class="pre">check_dots_empty0()</span></code>. It has a different UI but is
almost as efficient as checking for <code class="docutils literal notranslate"><span class="pre">missing(...)</span></code>. Use this in very
low level functions where a couple microseconds make a difference.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">arg_nm</span></code> argument of <code class="docutils literal notranslate"><span class="pre">arg_match0()</span></code> must now be a string or
symbol.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg_match()</span></code> now mentions the supplied argument (#1113).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_installed()</span></code> and <code class="docutils literal notranslate"><span class="pre">check_installed()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">version</span></code> argument (#1165).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_installed()</span></code> now consults the
<code class="docutils literal notranslate"><span class="pre">rlib_restart_package_not_found</span></code> global option to determine whether
to prompt users to install packages. This also disables the restart
mechanism (see below).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_installed()</span></code> now signals errors of class
<code class="docutils literal notranslate"><span class="pre">rlib_error_package_not_found</span></code> with a
<code class="docutils literal notranslate"><span class="pre">rlib_restart_package_not_found</span></code> restart. This allows calling
handlers to install the required packages and restart the check
(#1150).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_installed()</span></code> and <code class="docutils literal notranslate"><span class="pre">check_installed()</span></code> now support
DESCRIPTION-style version requirements like <code class="docutils literal notranslate"><span class="pre">&quot;rlang</span> <span class="pre">(&gt;=</span> <span class="pre">1.0)&quot;</span></code>.
They also gain <code class="docutils literal notranslate"><span class="pre">version</span></code> and <code class="docutils literal notranslate"><span class="pre">compare</span></code> arguments to supply requirements
programmatically.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_installed()</span></code> gains an <code class="docutils literal notranslate"><span class="pre">action</span></code> argument that is called when
the user chooses to install and update missing and outdated packages.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">check_exclusive()</span></code> function to check that only one argument of
a set is supplied (#1261).</p></li>
</ul>
</div>
<div class="section" id="r-apis">
<h3>R APIs<a class="headerlink" href="#r-apis" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">on_load()</span></code> and <code class="docutils literal notranslate"><span class="pre">run_on_load()</span></code> lets you run <code class="docutils literal notranslate"><span class="pre">.onLoad()</span></code> expressions
from any file of your package. <code class="docutils literal notranslate"><span class="pre">on_package_load()</span></code> runs expressions
when another package is loaded. (#1284)</p></li>
<li><p>The new predicate <code class="docutils literal notranslate"><span class="pre">is_call_simple()</span></code> indicates whether a call has a
name and/or a namespace. It provides two invariants:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">is_call_simple(x)</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, <code class="docutils literal notranslate"><span class="pre">call_name()</span></code> always returns a
string.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">is_call_simple(x,</span> <span class="pre">ns</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, <code class="docutils literal notranslate"><span class="pre">call_ns()</span></code> always
returns a string.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_name()</span></code> and <code class="docutils literal notranslate"><span class="pre">call_ns()</span></code> now return <code class="docutils literal notranslate"><span class="pre">NULL</span></code> with calls of the
form <code class="docutils literal notranslate"><span class="pre">foo::bar</span></code> (#670).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">current_call()</span></code>, <code class="docutils literal notranslate"><span class="pre">caller_call()</span></code>, and <code class="docutils literal notranslate"><span class="pre">frame_call()</span></code>
accessors. New <code class="docutils literal notranslate"><span class="pre">frame_fn()</span></code> accessor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_has()</span></code> and the corresponding C-level function no longer force
active bindings (#1292).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">names2&lt;-</span></code> replacement function that never adds missing values
when names don’t have names (#1301).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">zap_srcref()</span></code> now preserves attributes of closures.</p></li>
<li><p>Objects headers (as printed by <code class="docutils literal notranslate"><span class="pre">last_error()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_print()</span></code>, …)
are now formatted using the <code class="docutils literal notranslate"><span class="pre">cls</span></code> class of the cli package.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_function()</span></code> gains <code class="docutils literal notranslate"><span class="pre">arg</span></code> and <code class="docutils literal notranslate"><span class="pre">call</span></code> arguments to provide
contextual information about erroring inputs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_expression()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> for manually constructed
expressions that cannot be created by the R parser.</p></li>
<li><p>New C callable <code class="docutils literal notranslate"><span class="pre">rlang_env_unbind()</span></code>. This is a wrapper around
<code class="docutils literal notranslate"><span class="pre">R_removeVarFromFrame()</span></code> on R &gt;= 4.0.0. On older R this wraps the R
function <code class="docutils literal notranslate"><span class="pre">base::rm()</span></code>. Unlike <code class="docutils literal notranslate"><span class="pre">rm()</span></code>, this function does not warn
(nor throw) when a binding does not exist.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">friendly_type_of()</span></code> now supports missing arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_clone()</span></code> now properly clones active bindings and avoids forcing
promises (#1228). On R &lt; 4.0, promises are still forced.</p></li>
<li><p>Fixed an <code class="docutils literal notranslate"><span class="pre">s3_register()</span></code> issue when the registering package is a
dependency of the package that exports the generic (#1225).</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">compat-vctrs.R</span></code> file for robust manipulation of data frames
in zero-deps packages.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">compat-cli.R</span></code> file to format message elements consistently
with cli in zero-deps packages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compat-purrr.R</span></code> now longer includes <code class="docutils literal notranslate"><span class="pre">pluck*</span></code> helpers; these used a defintion
of pluck that predated purrr (#1159). <code class="docutils literal notranslate"><span class="pre">*_cpl()</span></code> has also been removed.
The <code class="docutils literal notranslate"><span class="pre">map*</span></code> wrappers now call <code class="docutils literal notranslate"><span class="pre">as_function()</span></code> so that you can pass short
anonymous functions that use <code class="docutils literal notranslate"><span class="pre">~</span></code> (#1157).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exprs_auto_name()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">repair_auto</span></code> argument to make automatic
names unique (#1116).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.named</span></code> argument of <code class="docutils literal notranslate"><span class="pre">dots_list()</span></code> can now be set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> to
give the result default names. With this option, fully unnamed
inputs produce a fully unnamed result with <code class="docutils literal notranslate"><span class="pre">NULL</span></code> names instead of a
character vector of minimal <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> names (#390).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_named2()</span></code> is a variant of <code class="docutils literal notranslate"><span class="pre">is_named()</span></code> that always returns
<code class="docutils literal notranslate"><span class="pre">TRUE</span></code> for empty vectors (#191). It tests for the property that each
element of a vector is named rather than the presence of a <code class="docutils literal notranslate"><span class="pre">names</span></code>
attribute.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">rlib_bytes</span></code> class imported from the bench package (#1117).
It prints and parses human-friendly sizes.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">env</span></code> argument of <code class="docutils literal notranslate"><span class="pre">as_function()</span></code> now defaults to the global
environment. Its previous default was the caller of <code class="docutils literal notranslate"><span class="pre">as_function()</span></code>,
which was rarely the correct environment to look in. Since it’s hard
to remember to pass the user environment and it’s sometimes tricky
to keep track of it, it’s best to consider string lookup as a
convenience for end users, not for developers (#1170).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">s3_register()</span></code> no longer fails when generic does not exist. This
prevents failures when users don’t have all the last versions of
packages (#1112).</p></li>
<li><p>Formulas are now deparsed according to the tidyverse style guide
(<code class="docutils literal notranslate"><span class="pre">~symbol</span></code> without space and <code class="docutils literal notranslate"><span class="pre">~</span> <span class="pre">expression()</span></code> with a space).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">hash_file()</span></code>, complementing <code class="docutils literal notranslate"><span class="pre">hash()</span></code>, to generate 128-bit hashes for
the data within a file without loading it into R (#1134).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">env_cache()</span></code> function to retrieve a value or create it with a
default if it doesn’t exist yet (#1081).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_get()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_get_list()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">last</span></code> argument. Lookup
stops in that environment. This can be useful in conjunction with
<code class="docutils literal notranslate"><span class="pre">base::topenv()</span></code>.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">call_match()</span></code> function. It is like <code class="docutils literal notranslate"><span class="pre">match.call()</span></code> but also
supports matching missing arguments to their defaults in the function
definition (#875).</p>
<p><code class="docutils literal notranslate"><span class="pre">call_standardise()</span></code> is deprecated in favour of <code class="docutils literal notranslate"><span class="pre">call_match()</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">expr_deparse()</span></code> now properly escapes <code class="docutils literal notranslate"><span class="pre">\</span></code> characters in symbols,
argument names, and vector names (#1160).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">friendly_type_of()</span></code> (from <code class="docutils literal notranslate"><span class="pre">compat-friendly-type.R</span></code>) now supports
matrices and arrays (#141).</p></li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">env_print()</span></code> to use <code class="docutils literal notranslate"><span class="pre">format_error_bullets()</span></code> and consistent
tidyverse style (#1154).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_names()</span></code> now recycles names of size 1 to the size of the input,
following the tidyverse recycling rules.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_bare_formula()</span></code> now handles the <code class="docutils literal notranslate"><span class="pre">scoped</span></code> argument
consistently. The default has been changed to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> for
compatibility with the historical default behaviour (#1115).</p></li>
<li><p>The “definition” API (<code class="docutils literal notranslate"><span class="pre">dots_definitions()</span></code> etc.) has been archived.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">is_complex()</span></code> predicates to complete the family (#1127).</p></li>
<li><p>The C function <code class="docutils literal notranslate"><span class="pre">r_obj_address()</span></code> now properly prefixes addresses
with the hexadecimal prefix <code class="docutils literal notranslate"><span class="pre">0x</span></code> on Windows (#1135).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">obj_address()</span></code> is now exported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%&lt;~%</span></code> now actually works.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">XXH3_64bits()</span></code> from the XXHash library is now exposed as C callable
under the name <code class="docutils literal notranslate"><span class="pre">rlang_xxh3_64bits()</span></code>.</p></li>
</ul>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-12">
<h1>rlang 0.4.12<a class="headerlink" href="#rlang-0-4-12" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fix for CRAN checks.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-11">
<h1>rlang 0.4.11<a class="headerlink" href="#rlang-0-4-11" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fix for CRAN checks.</p></li>
<li><p>Fixed a gcc11 warning related to <code class="docutils literal notranslate"><span class="pre">hash()</span></code> (#1088).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-10">
<h1>rlang 0.4.10<a class="headerlink" href="#rlang-0-4-10" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">hash()</span></code> function to generate 128-bit hashes for arbitrary R objects
using the xxHash library. The implementation is modeled after
<a class="reference external" href="https://github.com/coolbutuseless/xxhashlite">xxhashlite</a>, created
by &#64;coolbutuseless.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">check_installed()</span></code> function. Unlike <code class="docutils literal notranslate"><span class="pre">is_installed()</span></code>, it asks
the user whether to install missing packages. If the user accepts,
the packages are installed with <code class="docutils literal notranslate"><span class="pre">pak::pkg_install()</span></code> if available,
or <code class="docutils literal notranslate"><span class="pre">utils::install.packages()</span></code> otherwise. If the session is non
interactive or if the user chooses not to install the packages, the
current evaluation is aborted (#1075).</p></li>
<li><p>rlang is now licensed as MIT (#1063).</p></li>
<li><p>Fixed an issue causing extra empty lines in <code class="docutils literal notranslate"><span class="pre">inform()</span></code> messages with
<code class="docutils literal notranslate"><span class="pre">.frequency</span></code> (#1076, &#64;schloerke).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expr_deparse()</span></code> now correctly wraps code using <code class="docutils literal notranslate"><span class="pre">::</span></code> and <code class="docutils literal notranslate"><span class="pre">:::</span></code>
(#1072, &#64;krlmlr).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-9">
<h1>rlang 0.4.9<a class="headerlink" href="#rlang-0-4-9" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>Breaking changes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Dropped support for the R 3.2 series.</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">inject()</span></code> evaluates its argument with <code class="docutils literal notranslate"><span class="pre">!!</span></code>, <code class="docutils literal notranslate"><span class="pre">!!!</span></code>, and <code class="docutils literal notranslate"><span class="pre">{{</span></code>
support.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">enquo0()</span></code> and <code class="docutils literal notranslate"><span class="pre">enquos0()</span></code> operators for defusing function
arguments without automatic injection (unquotation).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">format_error_bullets()</span></code> is no longer experimental. The <code class="docutils literal notranslate"><span class="pre">message</span></code>
arguments of <code class="docutils literal notranslate"><span class="pre">abort()</span></code>, <code class="docutils literal notranslate"><span class="pre">warn()</span></code>, and <code class="docutils literal notranslate"><span class="pre">inform()</span></code> are automatically
passed to that function to make it easy to create messages with
regular, info, and error bullets. See <code class="docutils literal notranslate"><span class="pre">?format_error_bullets</span></code> for
more information.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">zap_srcref()</span></code> function to recursively remove source references
from functions and calls.</p></li>
<li><p>A new compat file for the zeallot operator <code class="docutils literal notranslate"><span class="pre">%&lt;-%</span></code> is now available
in the rlang repository.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">%&lt;~%</span></code> operator to define a variable lazily.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">env_browse()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_is_browsed()</span></code> functions. <code class="docutils literal notranslate"><span class="pre">env_browse()</span></code>
is equivalent to evaluating <code class="docutils literal notranslate"><span class="pre">browser()</span></code> within an environment. It
sets the environment to be persistently browsable (or unsets it if
<code class="docutils literal notranslate"><span class="pre">value</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> is supplied).</p></li>
<li><p>Functions created from quosures with <code class="docutils literal notranslate"><span class="pre">as_function()</span></code> now print in a
more user friendly way.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">rlang_print_backtrace</span></code> C callable for debugging from C
interpreters (#1059).</p></li>
</ul>
</div>
<div class="section" id="bugfixes-and-improvements">
<h2>Bugfixes and improvements<a class="headerlink" href="#bugfixes-and-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">.data</span></code> pronoun no longer skips functions (#1061). This solves a
dplyr issue involving rowwise data frames and list-columns of
functions (tidyverse/dplyr#5608).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_data_mask()</span></code> now intialises environments of the correct size to
improve efficiency (#1048).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eval_bare()</span></code>, <code class="docutils literal notranslate"><span class="pre">eval_tidy()</span></code> (#961), and <code class="docutils literal notranslate"><span class="pre">with_handlers()</span></code> (#518)
now propagate visibility.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> now ignores <code class="docutils literal notranslate"><span class="pre">NULL</span></code> inputs.</p></li>
<li><p>Fixed bug that prevented splicing a named empty vector with the
<code class="docutils literal notranslate"><span class="pre">!!!</span></code> operator (#1045).</p></li>
<li><p>The exit status of is now preserved in non-interactive sessions when
<code class="docutils literal notranslate"><span class="pre">entrace()</span></code> is used as an <code class="docutils literal notranslate"><span class="pre">options(error</span> <span class="pre">=</span> <span class="pre">)</span></code> handler (#1052,
rstudio/bookdown#920).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">next</span></code> and <code class="docutils literal notranslate"><span class="pre">break</span></code> are now properly deparsed as nullary operators.</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-8">
<h1>rlang 0.4.8<a class="headerlink" href="#rlang-0-4-8" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Backtraces now include native stacks (e.g. from C code) when the
<a class="reference external" href="https://r-prof.github.io/winch/">winch</a> package is installed and
<code class="docutils literal notranslate"><span class="pre">rlang_trace_use_winch</span></code> is set to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> (&#64;krlmlr).</p></li>
<li><p>Compatibility with upcoming testthat 3 and magrittr 2 releases.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_env()</span></code> now returns the proper environment with primitive
functions, i.e. the base namespace rather than the base environment
(r-lib/downlit#32).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entrace()</span></code> no longer handles non-rlang errors that carry a
backtrace. This improves compatibility with packages like callr.</p></li>
<li><p>Backtraces of unhandled errors are now displayed without truncation
in non-interactive sessions (#856).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_interactive()</span></code> no longer consults “rstudio.notebook.executing”
option (#1031).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-7">
<h1>rlang 0.4.7<a class="headerlink" href="#rlang-0-4-7" title="Permalink to this headline">¶</a></h1>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_muffle()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> instead of failing if the
condition is not mufflable (#1022).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">warn()</span></code> and <code class="docutils literal notranslate"><span class="pre">inform()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">.frequency</span></code> argument to control how
frequently the warning or message should be displayed.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">raw_deparse_str()</span></code> function for converting a raw vector into a
string of hexadecimal characters (&#64;krlmlr, #978).</p></li>
<li><p>The backtraces of chained errors are no longer decomposed by error
context. Instead, the error messages are displayed as a tree to
reflect the error ancestry, and the deepest backtrace in the ancestry
is displayed.</p>
<p>This change simplifies the display (#851) and makes it possible to
rethow errors from a calling handler rather than an exiting handler,
which we now think is more appropriate because it allows users to
<code class="docutils literal notranslate"><span class="pre">recover()</span></code> into the error.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_bind()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_bind_active()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_bind_lazy()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_get()</span></code>,
and <code class="docutils literal notranslate"><span class="pre">env_get_list()</span></code> have been rewritten in C.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_poke()</span></code> now supports <code class="docutils literal notranslate"><span class="pre">zap()</span></code> sentinels for removing bindings
(#1012) and has better support for characters that are not
representable in the local encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_poke()</span></code> has been rewritten in C for performance.</p></li>
<li><p>The unicode translation warnings that appeared on Windows with R 4.0
are now fixed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_unbind(inherit</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code> now only removes a binding from the
first parent environment that has a binding. It used to remove the
bindings from the whole ancestry. The new behaviour doesn’t
guarantee that a scope doesn’t have a binding but it is safer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_has()</span></code> is now rewritten in C for performance.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dots_list()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">.named</span></code> argument for auto-naming dots (#957).</p></li>
<li><p>It is now possible to subset the <code class="docutils literal notranslate"><span class="pre">.data</span></code> pronoun with quosured
symbols or strings (#807).</p></li>
<li><p>Expressions like <code class="docutils literal notranslate"><span class="pre">quote(list(&quot;a</span> <span class="pre">b&quot;</span> <span class="pre">=</span> <span class="pre">1))</span></code> are now properly deparsed
by <code class="docutils literal notranslate"><span class="pre">expr_deparse()</span></code> (#950).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parse_exprs()</span></code> now preserves names (#808). When a single string
produces multiple expressions, the names may be useful to figure out
what input produced which expression.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parse_exprs()</span></code> now supports empty expressions (#954).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list2(!!!x)</span></code> no longer evaluates <code class="docutils literal notranslate"><span class="pre">x</span></code> multiple times (#981).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_installed()</span></code> now properly handles a <code class="docutils literal notranslate"><span class="pre">pkg</span></code> argument of length &gt; 1.
Before this it silently tested the first element of <code class="docutils literal notranslate"><span class="pre">pkg</span></code> only
and thus always returned <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> if the first package was installed
regardless of the actual length of <code class="docutils literal notranslate"><span class="pre">pkg</span></code>. (#991, &#64;salim-b)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg_match0()</span></code> is a faster version of <code class="docutils literal notranslate"><span class="pre">arg_match()</span></code> for use when performance
is at a premium (#997, &#64;krlmlr).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-6">
<h1>rlang 0.4.6<a class="headerlink" href="#rlang-0-4-6" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">!!!</span></code> now uses a combination of <code class="docutils literal notranslate"><span class="pre">length()</span></code>, <code class="docutils literal notranslate"><span class="pre">names()</span></code>, and <code class="docutils literal notranslate"><span class="pre">[[</span></code> to splice
S3 and S4 objects. This produces more consistent behaviour than <code class="docutils literal notranslate"><span class="pre">as.list()</span></code>
on a wider variety of vector classes (#945, tidyverse/dplyr#4931).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-5">
<h1>rlang 0.4.5<a class="headerlink" href="#rlang-0-4-5" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">set_names()</span></code>, <code class="docutils literal notranslate"><span class="pre">is_formula()</span></code>, and <code class="docutils literal notranslate"><span class="pre">names2()</span></code> are now implemented in
C for efficiency.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.data</span></code> pronoun now accepts symbol subscripts (#836).</p></li>
<li><p>Quosure lists now explicitly inherit from <code class="docutils literal notranslate"><span class="pre">&quot;list&quot;</span></code>. This makes them
compatible with the vctrs package (#928).</p></li>
<li><p>All rlang options are now documented in a centralised place, see
<code class="docutils literal notranslate"><span class="pre">?rlang::faq-options</span></code> (#899, &#64;smingerson).</p></li>
<li><p>Fixed crash when <code class="docutils literal notranslate"><span class="pre">env_bindings_are_lazy()</span></code> gets improper arguments (#923).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg_match()</span></code> now detects and suggests possible typos in provided
arguments (&#64;jonkeane, #798).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arg_match()</span></code> now gives an error if argument is of length greater
than 1 and doesn’t exactly match the values input, similar to base
<code class="docutils literal notranslate"><span class="pre">match.arg</span></code> (#914, &#64;AliciaSchep)</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-4">
<h1>rlang 0.4.4<a class="headerlink" href="#rlang-0-4-4" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Maintenance release for CRAN.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-3">
<h1>rlang 0.4.3<a class="headerlink" href="#rlang-0-4-3" title="Permalink to this headline">¶</a></h1>
<ul>
<li><p>You can now use glue syntax to unquote on the LHS of <code class="docutils literal notranslate"><span class="pre">:=</span></code>. This
syntax is automatically available in all functions taking dots with
<code class="docutils literal notranslate"><span class="pre">list2()</span></code> and <code class="docutils literal notranslate"><span class="pre">enquos()</span></code>, and thus most of the tidyverse. Note that
if you use the glue syntax in an R package, you need to import glue.</p>
<p>A single pair of braces triggers normal glue interpolation:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">)</span>

<span class="n">suffix</span> <span class="o">&lt;-</span> <span class="s">&quot;foo&quot;</span>
<span class="n">df</span> <span class="o">%&gt;%</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">mutate</span><span class="p">(</span><span class="s">&quot;var_{suffix}&quot;</span> <span class="o">:=</span> <span class="n">x</span> <span class="o">*</span> <span class="m">2</span><span class="p">)</span>
<span class="c1">#&gt;   x var_foo</span>
<span class="c1">#&gt; 1 1       2</span>
<span class="c1">#&gt; 2 2       4</span>
<span class="c1">#&gt; 3 3       6</span>
</pre></div>
</div>
<p>Using a pair of double braces is for labelling a function argument.
Technically, this is shortcut for <code class="docutils literal notranslate"><span class="pre">&quot;{as_label(enquo(arg))}&quot;</span></code>. The
syntax is similar to the curly-curly syntax for interpolating
function arguments:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">my_wrapper</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="s">&quot;foo&quot;</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">data</span> <span class="o">%&gt;%</span> <span class="n">dplyr</span><span class="o">::</span><span class="nf">mutate</span><span class="p">(</span><span class="s">&quot;{{ var }}_{suffix}&quot;</span> <span class="o">:=</span> <span class="p">{{</span> <span class="n">var</span> <span class="p">}}</span> <span class="o">*</span> <span class="m">2</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">my_wrapper</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1">#&gt;   x x_foo</span>
<span class="c1">#&gt; 1 1     2</span>
<span class="c1">#&gt; 2 2     4</span>
<span class="c1">#&gt; 3 3     6</span>

<span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">my_wrapper</span><span class="p">(</span><span class="nf">sqrt</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="c1">#&gt;   x sqrt(x)_foo</span>
<span class="c1">#&gt; 1 1    2.000000</span>
<span class="c1">#&gt; 2 2    2.828427</span>
<span class="c1">#&gt; 3 3    3.464102</span>
</pre></div>
</div>
</li>
<li><p>Fixed a bug in magrittr backtraces that caused duplicate calls to
appear in the trace.</p></li>
<li><p>Fixed a bug in magrittr backtraces that caused wrong call indices.</p></li>
<li><p>Empty backtraces are no longer shown when <code class="docutils literal notranslate"><span class="pre">rlang_backtrace_on_error</span></code>
is set.</p></li>
<li><p>The tidy eval <code class="docutils literal notranslate"><span class="pre">.env</span></code> pronoun is now exported for documentation
purposes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">warn()</span></code> and <code class="docutils literal notranslate"><span class="pre">abort()</span></code> now check that either <code class="docutils literal notranslate"><span class="pre">class</span></code> or <code class="docutils literal notranslate"><span class="pre">message</span></code>
was supplied. <code class="docutils literal notranslate"><span class="pre">inform()</span></code> allows sending empty message as it is
occasionally useful for building user output incrementally.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flatten()</span></code> fails with a proper error when input can’t be flattened (#868, #885).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inform()</span></code> now consistently appends a final newline to the message
(#880).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_body.default()</span></code> is now properly registered.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> now uses the same approach as <code class="docutils literal notranslate"><span class="pre">abort()</span></code> to save
unhandled errors to <code class="docutils literal notranslate"><span class="pre">last_error()</span></code>.</p></li>
<li><p>Parsable constants like <code class="docutils literal notranslate"><span class="pre">NaN</span></code> and <code class="docutils literal notranslate"><span class="pre">NA_integer_</span></code> are now deparsed by
<code class="docutils literal notranslate"><span class="pre">expr_deparse()</span></code> in their parsable form (#890).</p></li>
<li><p>Infix operators now stick to their LHS when deparsed by
<code class="docutils literal notranslate"><span class="pre">expr_deparse()</span></code> (#890).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-2">
<h1>rlang 0.4.2<a class="headerlink" href="#rlang-0-4-2" title="Permalink to this headline">¶</a></h1>
<ul>
<li><p>New <code class="docutils literal notranslate"><span class="pre">cnd_header()</span></code>, <code class="docutils literal notranslate"><span class="pre">cnd_body()</span></code> and <code class="docutils literal notranslate"><span class="pre">cnd_footer()</span></code> generics. These
are automatically called by <code class="docutils literal notranslate"><span class="pre">conditionMessage.rlang_error()</span></code>, the
default method for all rlang errors.</p>
<p>Concretely, this is a way of breaking up lazy generation of error
messages with <code class="docutils literal notranslate"><span class="pre">conditionMessage()</span></code> into three independent
parts. This provides a lot of flexibility for hierarchies of error
classes, for instance you could inherit the body of an error message
from a parent class while overriding the header and footer.</p>
</li>
<li><p>The reminder to call <code class="docutils literal notranslate"><span class="pre">last_error()</span></code> is now less confusing thanks to
a suggestion by &#64;markhwhiteii.</p></li>
<li><p>The functions prefixed in <code class="docutils literal notranslate"><span class="pre">scoped_</span></code> have been renamed to use the
more conventional <code class="docutils literal notranslate"><span class="pre">local_</span></code> prefix. For instance, <code class="docutils literal notranslate"><span class="pre">scoped_bindings()</span></code>
is now <code class="docutils literal notranslate"><span class="pre">local_bindings()</span></code>. The <code class="docutils literal notranslate"><span class="pre">scoped_</span></code> functions will be
deprecated in the next significant version of rlang (0.5.0).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.subclass</span></code> argument of <code class="docutils literal notranslate"><span class="pre">abort()</span></code>, <code class="docutils literal notranslate"><span class="pre">warn()</span></code> and <code class="docutils literal notranslate"><span class="pre">inform()</span></code> has
been renamed to <code class="docutils literal notranslate"><span class="pre">class</span></code>. This is for consistency with our
conventions for class constructors documented in
<a class="reference external" href="https://adv-r.hadley.nz/s3.html#s3-subclassing">https://adv-r.hadley.nz/s3.html#s3-subclassing</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inform()</span></code> now prints messages to the standard output by default in
interactive sessions. This makes them appear more like normal output
in IDEs such as RStudio. In non-interactive sessions, messages are
still printed to standard error to make it easy to redirect messages
when running R scripts (#852).</p></li>
<li><p>Fixed an error in <code class="docutils literal notranslate"><span class="pre">trace_back()</span></code> when the call stack contains a
quosured symbol.</p></li>
<li><p>Backtrace is now displayed in full when an error occurs in
non-interactive sessions. Previously the backtraces of parent errors
were left out.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-1">
<h1>rlang 0.4.1<a class="headerlink" href="#rlang-0-4-1" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>New experimental framework for creating bulleted error messages. See
<code class="docutils literal notranslate"><span class="pre">?cnd_message</span></code> for the motivation and an overwiew of the tools we
have created to support this approach. In particular, <code class="docutils literal notranslate"><span class="pre">abort()</span></code> now
takes character vectors to assemble a bullet list. Elements named
<code class="docutils literal notranslate"><span class="pre">x</span></code> are prefixed with a red cross, elements named <code class="docutils literal notranslate"><span class="pre">i</span></code> are prefixed
with a blue info symbol, and unnamed elements are prefixed with a
bullet.</p></li>
<li><p>Capture of backtrace in the context of rethrowing an error from an
exiting handler has been improved. The <code class="docutils literal notranslate"><span class="pre">tryCatch()</span></code> context no
longer leaks in the high-level backtrace.</p></li>
<li><p>Printing an error no longer recommends calling <code class="docutils literal notranslate"><span class="pre">last_trace()</span></code>,
unless called from <code class="docutils literal notranslate"><span class="pre">last_error()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_clone()</span></code> no longer recreates active bindings and is now just an
alias for <code class="docutils literal notranslate"><span class="pre">env2list(as.list(env))</span></code>. Unlike <code class="docutils literal notranslate"><span class="pre">as.list()</span></code> which returns
the active binding function on R &lt; 4.0, the value of active bindings
is consistently used in all versions.</p></li>
<li><p>The display of rlang errors derived from parent errors has been
improved. The simplified backtrace (as printed by
<code class="docutils literal notranslate"><span class="pre">rlang::last_error()</span></code>) no longer includes the parent errors. On the
other hand, the full backtrace (as printed by <code class="docutils literal notranslate"><span class="pre">rlang::last_trace()</span></code>)
now includes the backtraces of the parent errors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> has improved support for rlang errors created with
<code class="docutils literal notranslate"><span class="pre">error_cnd()</span></code>. It now records a backtrace if there isn’t one
already, and saves the error so it can be inspected with
<code class="docutils literal notranslate"><span class="pre">rlang::last_error()</span></code>.</p></li>
<li><p>rlang errors are no longer formatted and saved through
<code class="docutils literal notranslate"><span class="pre">conditionMessage()</span></code>. This makes it easier to use a
<code class="docutils literal notranslate"><span class="pre">conditionMessage()</span></code> method in subclasses created with <code class="docutils literal notranslate"><span class="pre">abort()</span></code>,
which is useful to delay expensive generation of error messages
until display time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> can now be called without error message. This is useful
when <code class="docutils literal notranslate"><span class="pre">conditionMessage()</span></code> is used to generate the message at
print-time.</p></li>
<li><p>Fixed an infinite loop in <code class="docutils literal notranslate"><span class="pre">eval_tidy()</span></code>. It occurred when evaluating
a quosure that inherits from the mask itself.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_bind()</span></code>’s performance has been significantly improved by fixing a bug
that caused values to be repeatedly looked up by name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_muffle()</span></code> now checks that a restart exists before invoking
it. The restart might not exist if the condition is signalled with a
different function (such as <code class="docutils literal notranslate"><span class="pre">stop(warning_cnd)</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trace_length()</span></code> returns the number of frames in a backtrace.</p></li>
<li><p>Added internal utility <code class="docutils literal notranslate"><span class="pre">cnd_entrace()</span></code> to add a backtrace to a
condition.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rlang::last_error()</span></code> backtraces are no longer displayed in red.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">%|%</span> <span class="pre">y</span></code> now also works when <code class="docutils literal notranslate"><span class="pre">y</span></code> is of same length as <code class="docutils literal notranslate"><span class="pre">x</span></code> (&#64;rcannood, #806).</p></li>
<li><p>Empty named lists are now deparsed more explicitly as
<code class="docutils literal notranslate"><span class="pre">&quot;&lt;named</span> <span class="pre">list&gt;&quot;</span></code>.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">chr()</span></code> bug causing it to return invisibly.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-4-0">
<h1>rlang 0.4.0<a class="headerlink" href="#rlang-0-4-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="tidy-evaluation">
<h2>Tidy evaluation<a class="headerlink" href="#tidy-evaluation" title="Permalink to this headline">¶</a></h2>
<div class="section" id="interpolate-function-inputs-with-the-curly-curly-operator">
<h3>Interpolate function inputs with the curly-curly operator<a class="headerlink" href="#interpolate-function-inputs-with-the-curly-curly-operator" title="Permalink to this headline">¶</a></h3>
<p>The main change of this release is the new tidy evaluation operator
<code class="docutils literal notranslate"><span class="pre">{{</span></code>.  This operator abstracts the quote-and-unquote idiom into a
single interpolation step:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_wrapper</span> <span class="o">&lt;-</span> <span class="n">function</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="n">by</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">data</span> <span class="o">%&gt;%</span>
    <span class="n">group_by</span><span class="p">({{</span> <span class="n">by</span> <span class="p">}})</span> <span class="o">%&gt;%</span>
    <span class="n">summarise</span><span class="p">(</span><span class="n">average</span> <span class="o">=</span> <span class="n">mean</span><span class="p">({{</span> <span class="n">var</span> <span class="p">}},</span> <span class="n">na</span><span class="o">.</span><span class="n">rm</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">var</span> <span class="pre">}}</span></code> is a shortcut for <code class="docutils literal notranslate"><span class="pre">!!enquo(var)</span></code> that should be easier on
the eyes, and easier to learn and teach.</p>
<p>Note that for multiple inputs, the existing documentation doesn’t
stress enough that you can just pass dots straight to other tidy eval
functions. There is no need for quote-and-unquote unless you need to
modify the inputs or their names in some way:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_wrapper</span> <span class="o">&lt;-</span> <span class="n">function</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">var</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">data</span> <span class="o">%&gt;%</span>
    <span class="n">group_by</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="n">summarise</span><span class="p">(</span><span class="n">average</span> <span class="o">=</span> <span class="n">mean</span><span class="p">({{</span> <span class="n">var</span> <span class="p">}},</span> <span class="n">na</span><span class="o">.</span><span class="n">rm</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">))</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="more-robust-env-pronoun">
<h3>More robust <code class="docutils literal notranslate"><span class="pre">.env</span></code> pronoun<a class="headerlink" href="#more-robust-env-pronoun" title="Permalink to this headline">¶</a></h3>
<p>Another improvement to tidy evaluation should make it easier to use
the <code class="docutils literal notranslate"><span class="pre">.env</span></code> pronoun. Starting from this release, subsetting an object
from the <code class="docutils literal notranslate"><span class="pre">.env</span></code> pronoun now evaluates the corresponding symbol. This
makes <code class="docutils literal notranslate"><span class="pre">.env</span></code> more robust, in particular in magrittr pipelines. The
following example would previously fail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>foo &lt;- 10
mtcars %&gt;% mutate(cyl = cyl * .env$foo)
</pre></div>
</div>
<p>This way, using the <code class="docutils literal notranslate"><span class="pre">.env</span></code> pronoun is now equivalent to unquoting a
constant objects, but with an easier syntax:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>mtcars %&gt;% mutate(cyl = cyl * !!foo)
</pre></div>
</div>
<p>Note that following this change, and despite its name, <code class="docutils literal notranslate"><span class="pre">.env</span></code> is no
longer referring to a bare environment. Instead, it is a special
shortcut with its own rules. Similarly, the <code class="docutils literal notranslate"><span class="pre">.data</span></code> pronoun is not
really a data frame.</p>
</div>
</div>
<div class="section" id="new-functions-and-features">
<h2>New functions and features<a class="headerlink" href="#new-functions-and-features" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>New <code class="docutils literal notranslate"><span class="pre">pairlist2()</span></code> function with splicing support. It preserves
missing arguments, which makes it useful for lists of formal
parameters for functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_bool()</span></code> is a scalar type predicate that checks whether its input
is a single <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> or <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>. Like <code class="docutils literal notranslate"><span class="pre">is_string()</span></code>, it returns
<code class="docutils literal notranslate"><span class="pre">FALSE</span></code> when the input is missing. This is useful for type-checking
function arguments (#695).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_string()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">string</span></code> argument. <code class="docutils literal notranslate"><span class="pre">is_string(x,</span> <span class="pre">&quot;foo&quot;)</span></code> is a
shortcut for <code class="docutils literal notranslate"><span class="pre">is_character(x)</span> <span class="pre">&amp;&amp;</span> <span class="pre">length(x)</span> <span class="pre">==</span> <span class="pre">1</span> <span class="pre">&amp;&amp;</span> <span class="pre">identical(x,</span> <span class="pre">&quot;foo&quot;)</span></code>.</p></li>
<li><p>Lists of quosures now have pillar methods for display in tibbles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_names()</span></code> now names unnamed input vectors before applying a
function. The following expressions are now equivalent:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">letters</span> <span class="o">%&gt;%</span> <span class="n">set_names</span><span class="p">()</span> <span class="o">%&gt;%</span> <span class="n">set_names</span><span class="p">(</span><span class="n">toupper</span><span class="p">)</span>

<span class="n">letters</span> <span class="o">%&gt;%</span> <span class="n">set_names</span><span class="p">(</span><span class="n">toupper</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>You can now pass a character vector as message argument for
<code class="docutils literal notranslate"><span class="pre">abort()</span></code>, <code class="docutils literal notranslate"><span class="pre">warn()</span></code>, <code class="docutils literal notranslate"><span class="pre">inform()</span></code>, and <code class="docutils literal notranslate"><span class="pre">signal()</span></code>. The vector is
collapsed to a single string with a <code class="docutils literal notranslate"><span class="pre">&quot;\n&quot;</span></code> newline separating each
element of the input vector (#744).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maybe_missing()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">default</span></code> argument.</p></li>
<li><p>New functions for weak references: <code class="docutils literal notranslate"><span class="pre">new_weakref()</span></code>, <code class="docutils literal notranslate"><span class="pre">weakref_key()</span></code>,
<code class="docutils literal notranslate"><span class="pre">weakref_value()</span></code>, and <code class="docutils literal notranslate"><span class="pre">is_weakref()</span></code> (&#64;wch, #787).</p></li>
</ul>
</div>
<div class="section" id="performance">
<h2>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The performance of <code class="docutils literal notranslate"><span class="pre">exec()</span></code> has been improved. It is now on the same
order of performance as <code class="docutils literal notranslate"><span class="pre">do.call()</span></code>, though slightly slower.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call2()</span></code> now uses the new <code class="docutils literal notranslate"><span class="pre">pairlist2()</span></code> function internally. This
considerably improves its performance. This also means it now
preserves empty arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">call2</span><span class="p">(</span><span class="s2">&quot;fn&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">,</span> <span class="n">foo</span> <span class="o">=</span> <span class="p">)</span>
<span class="c1">#&gt; fn(1, , foo = )</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="bugfixes-and-small-improvements">
<h2>Bugfixes and small improvements<a class="headerlink" href="#bugfixes-and-small-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">with_handlers()</span></code> now installs calling handlers first on the stack,
no matter their location in the argument list. This way they always
take precedence over exiting handlers, which ensures their side
effects (such as logging) take place (#718).</p></li>
<li><p>In rlang backtraces, the <code class="docutils literal notranslate"><span class="pre">global::</span></code> prefix is now only added when
the function directly inherits from the global environment.
Functions inheriting indirectly no longer have a namespace
qualifier (#733).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options(error</span> <span class="pre">=</span> <span class="pre">rlang::entrace)</span></code> now has better support for errors
thrown from C (#779). It also saves structured errors in the <code class="docutils literal notranslate"><span class="pre">error</span></code>
field of <code class="docutils literal notranslate"><span class="pre">rlang::last_error()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ns_env()</span></code> and <code class="docutils literal notranslate"><span class="pre">ns_env_name()</span></code> (experimental functions) now support
functions and environments consisently. They also require an
argument from now on.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_interactive()</span></code> is aware of the <code class="docutils literal notranslate"><span class="pre">TESTTHAT</span></code> environment variable and
returns <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> when it is <code class="docutils literal notranslate"><span class="pre">&quot;true&quot;</span></code> (&#64;jennybc, #738).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fn_fmls()</span></code> and variants no longer coerce their input to a
closure. Instead, they throw an error.</p></li>
<li><p>Fixed an issue in knitr that caused backtraces to print even when <code class="docutils literal notranslate"><span class="pre">error</span> <span class="pre">=</span> <span class="pre">TRUE</span></code>.</p></li>
<li><p>The return object from <code class="docutils literal notranslate"><span class="pre">as_function()</span></code> now inherits from
<code class="docutils literal notranslate"><span class="pre">&quot;function&quot;</span></code> (&#64;richierocks, #735).</p></li>
</ul>
</div>
<div class="section" id="lifecycle">
<h2>Lifecycle<a class="headerlink" href="#lifecycle" title="Permalink to this headline">¶</a></h2>
<p>We commit to support 5 versions of R. As R 3.6 is about to be
released, rlang now requires R 3.2 or greater. We’re also continuing
our efforts to streamline and narrow the rlang API.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">modify()</span></code> and <code class="docutils literal notranslate"><span class="pre">prepend()</span></code> (two experimental functions marked as in
the questioning stage since rlang 0.3.0) are now deprecated. Vector
functions are now out of scope for rlang. They might be revived in
the vctrs or funs packages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exiting()</span></code> is soft-deprecated because <code class="docutils literal notranslate"><span class="pre">with_handlers()</span></code> treats
handlers as exiting by default.</p></li>
<li><p>The vector constructors like <code class="docutils literal notranslate"><span class="pre">lgl()</span></code> or <code class="docutils literal notranslate"><span class="pre">new_logical()</span></code> are now in
the questioning stage. They are likely to be moved to the vctrs
package at some point. Same for the missing values shortcuts like
<code class="docutils literal notranslate"><span class="pre">na_lgl</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_logical()</span></code>, <code class="docutils literal notranslate"><span class="pre">as_integer()</span></code>, etc have been soft-deprecated in
favour of <code class="docutils literal notranslate"><span class="pre">vctrs::vec_cast()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type_of()</span></code>, <code class="docutils literal notranslate"><span class="pre">switch_type()</span></code>, <code class="docutils literal notranslate"><span class="pre">coerce_type()</span></code>, and friends are
soft-deprecated.</p></li>
<li><p>The encoding and locale API was summarily archived. This API didn’t
bring any value and wasn’t used on CRAN.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lang_type_of()</span></code>, <code class="docutils literal notranslate"><span class="pre">switch_lang()</span></code>, and <code class="docutils literal notranslate"><span class="pre">coerce_lang()</span></code> were
archived. These functions were not used on CRAN or internally.</p></li>
<li><p>Subsetting quosures with <code class="docutils literal notranslate"><span class="pre">[</span></code> or <code class="docutils literal notranslate"><span class="pre">[[</span></code> is soft-deprecated.</p></li>
<li><p>All functions that were soft-deprecated, deprecated, or defunct in
previous releases have been bumped to the next lifecycle stage.</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-3-2">
<h1>rlang 0.3.2<a class="headerlink" href="#rlang-0-3-2" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed protection issue reported by rchk.</p></li>
<li><p>The experimental option <code class="docutils literal notranslate"><span class="pre">rlang__backtrace_on_error</span></code> is no longer
experimental and has been renamed to <code class="docutils literal notranslate"><span class="pre">rlang_backtrace_on_error</span></code>.</p></li>
<li><p>New “none” option for <code class="docutils literal notranslate"><span class="pre">rlang_backtrace_on_error</span></code>.</p></li>
<li><p>Unary operators applied to quosures now give better error messages.</p></li>
<li><p>Fixed issue with backtraces of warnings promoted to error, and
entraced via <code class="docutils literal notranslate"><span class="pre">withCallingHandlers()</span></code>. The issue didn’t affect
entracing via top level <code class="docutils literal notranslate"><span class="pre">options(error</span> <span class="pre">=</span> <span class="pre">rlang::entrace)</span></code> handling.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-3-1">
<h1>rlang 0.3.1<a class="headerlink" href="#rlang-0-3-1" title="Permalink to this headline">¶</a></h1>
<p>This patch release polishes the new backtrace feature introduced in
rlang 0.3.0 and solves bugs for the upcoming release of purrr
0.3.0. It also features <code class="docutils literal notranslate"><span class="pre">as_label()</span></code> and <code class="docutils literal notranslate"><span class="pre">as_name()</span></code> which are meant
to replace <code class="docutils literal notranslate"><span class="pre">quo_name()</span></code> in the future. Finally, a bunch of deparsing
issues have been fixed.</p>
<div class="section" id="backtrace-fixes">
<h2>Backtrace fixes<a class="headerlink" href="#backtrace-fixes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>New <code class="docutils literal notranslate"><span class="pre">entrace()</span></code> condition handler. Add this to your RProfile to
enable rlang backtraces for all errors, including warnings promoted
to errors:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">if </span><span class="p">(</span><span class="nf">requireNamespace</span><span class="p">(</span><span class="s">&quot;rlang&quot;</span><span class="p">,</span> <span class="n">quietly</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">))</span> <span class="p">{</span>
  <span class="nf">options</span><span class="p">(</span><span class="n">error</span> <span class="o">=</span> <span class="n">rlang</span><span class="o">::</span><span class="n">entrace</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This handler also works as a calling handler:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">with_handlers</span><span class="p">(</span>
  <span class="n">error</span> <span class="o">=</span> <span class="nf">calling</span><span class="p">(</span><span class="n">entrace</span><span class="p">),</span>
  <span class="nf">foo</span><span class="p">(</span><span class="n">bar</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>However it’s often more practical to use <code class="docutils literal notranslate"><span class="pre">with_abort()</span></code> in that case:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">with_abort</span><span class="p">(</span><span class="nf">foo</span><span class="p">(</span><span class="n">bar</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_abort()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">classes</span></code> argument to promote any kind of
condition to an rlang error.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">last_trace()</span></code> shortcut to print the backtrace stored in the
<code class="docutils literal notranslate"><span class="pre">last_error()</span></code>.</p></li>
<li><p>Backtrace objects now print in full by default.</p></li>
<li><p>Calls in backtraces are now numbered according to their position in
the call tree. The numbering is non-contiguous for simplified
backtraces because of omitted call frames.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">catch_cnd()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">classes</span></code> argument to specify which classes of
condition to catch. It returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if the expected condition
could not be caught (#696).</p></li>
</ul>
</div>
<div class="section" id="as-label-and-as-name">
<h2><code class="docutils literal notranslate"><span class="pre">as_label()</span></code> and <code class="docutils literal notranslate"><span class="pre">as_name()</span></code><a class="headerlink" href="#as-label-and-as-name" title="Permalink to this headline">¶</a></h2>
<p>The new <code class="docutils literal notranslate"><span class="pre">as_label()</span></code> and <code class="docutils literal notranslate"><span class="pre">as_name()</span></code> functions should be used instead
of <code class="docutils literal notranslate"><span class="pre">quo_name()</span></code> to transform objects and quoted expressions to a
string. We have noticed that tidy eval users often use <code class="docutils literal notranslate"><span class="pre">quo_name()</span></code> to
extract names from quosured symbols. This is not a good use for that
function because the way <code class="docutils literal notranslate"><span class="pre">quo_name()</span></code> creates a string is not a well
defined operation.</p>
<p>For this reason, we are replacing <code class="docutils literal notranslate"><span class="pre">quo_name()</span></code> with two new functions
that have more clearly defined purposes, and hopefully better names
reflecting those purposes. Use <code class="docutils literal notranslate"><span class="pre">as_label()</span></code> to transform any object to
a short human-readable description, and <code class="docutils literal notranslate"><span class="pre">as_name()</span></code> to extract names
from (possibly quosured) symbols.</p>
<p>Create labels with <code class="docutils literal notranslate"><span class="pre">as_label()</span></code> to:</p>
<ul class="simple">
<li><p>Display an object in a concise way, for example to labellise axes
in a graphical plot.</p></li>
<li><p>Give default names to columns in a data frame. In this case,
labelling is the first step before name repair.</p></li>
</ul>
<p>We expect <code class="docutils literal notranslate"><span class="pre">as_label()</span></code> to gain additional parameters in the future,
for example to control the maximum width of a label. The way an object
is labelled is thus subject to change.</p>
<p>On the other hand, <code class="docutils literal notranslate"><span class="pre">as_name()</span></code> transforms symbols back to a string in
a well defined manner. Unlike <code class="docutils literal notranslate"><span class="pre">as_label()</span></code>, <code class="docutils literal notranslate"><span class="pre">as_name()</span></code> guarantees the
roundtrip symbol -&gt; string -&gt; symbol.</p>
<p>In general, if you don’t know for sure what kind of object you’re
dealing with (a call, a symbol, an unquoted constant), use
<code class="docutils literal notranslate"><span class="pre">as_label()</span></code> and make no assumption about the resulting string. If you
know you have a symbol and need the name of the object it refers to,
use <code class="docutils literal notranslate"><span class="pre">as_name()</span></code>. For instance, use <code class="docutils literal notranslate"><span class="pre">as_label()</span></code> with objects captured
with <code class="docutils literal notranslate"><span class="pre">enquo()</span></code> and <code class="docutils literal notranslate"><span class="pre">as_name()</span></code> with symbols captured with <code class="docutils literal notranslate"><span class="pre">ensym()</span></code>.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">quo_name()</span></code> will only be soft-deprecated at the next major
version of rlang (0.4.0). At this point, it will start issuing
once-per-session warnings in scripts, but not in packages. It will
then be deprecated in yet another major version, at which point it
will issue once-per-session warnings in packages as well. You thus
have plenty of time to change your code.</p>
</div>
<div class="section" id="minor-fixes-and-features">
<h2>Minor fixes and features<a class="headerlink" href="#minor-fixes-and-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">is_interactive()</span></code> function. It serves the same purpose as
<code class="docutils literal notranslate"><span class="pre">base::interactive()</span></code> but also checks if knitr is in progress and
provides an escape hatch. Use <code class="docutils literal notranslate"><span class="pre">with_interactive()</span></code> and
<code class="docutils literal notranslate"><span class="pre">scoped_interactive()</span></code> to override the return value of
<code class="docutils literal notranslate"><span class="pre">is_interactive()</span></code>. This is useful in unit tests or to manually turn
on interactive features in RMarkdown outputs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calling()</span></code> now boxes its argument.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">done()</span></code> function to box a value. Done boxes are sentinels to
indicate early termination of a loop or computation. For instance,
it will be used in the purrr package to allow users to shortcircuit
a reduction or accumulation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new_box()</span></code> now accepts additional attributes passed to <code class="docutils literal notranslate"><span class="pre">structure()</span></code>.</p></li>
<li><p>Fixed a quotation bug with binary operators of zero or one argument
such as <code class="docutils literal notranslate"><span class="pre">`/`(1)</span></code> (#652). They are now deparsed and printed
properly as well.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">call_ns()</span></code> function to retrieve the namespace of a
call. Returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if the call is not namespaced.</p></li>
<li><p>Top-level S3 objects are now deparsed properly.</p></li>
<li><p>Empty <code class="docutils literal notranslate"><span class="pre">{</span></code> blocks are now deparsed on the same line.</p></li>
<li><p>Fixed a deparsing issue with symbols containing non-ASCII
characters (#691).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expr_print()</span></code> now handles <code class="docutils literal notranslate"><span class="pre">[</span></code> and <code class="docutils literal notranslate"><span class="pre">[[</span></code> operators correctly, and
deparses non-syntactic symbols with backticks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_modify()</span></code> now respects ordering of unnamed inputs. Before this
fix, it would move all unnamed inputs after named ones.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_closure()</span></code> wrappers now call primitives with positional
arguments to avoid edge case issues of argument matching.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_closure()</span></code> wrappers now dispatch properly on methods defined in
the global environment (tidyverse/purrr#459).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_closure()</span></code> now supports both base-style (<code class="docutils literal notranslate"><span class="pre">e1</span></code> and <code class="docutils literal notranslate"><span class="pre">e2</span></code>) and
purrr-style (<code class="docutils literal notranslate"><span class="pre">.x</span></code> and <code class="docutils literal notranslate"><span class="pre">.y</span></code>) arguments with binary primitives.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exec()</span></code> takes <code class="docutils literal notranslate"><span class="pre">.fn</span></code> as first argument instead of <code class="docutils literal notranslate"><span class="pre">f</span></code>, for
consistency with other rlang functions.</p></li>
<li><p>Fixed infinite loop with quosures created inside a data mask.</p></li>
<li><p>Base errors set as <code class="docutils literal notranslate"><span class="pre">parent</span></code> of rlang errors are now printed
correctly.</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-3-0">
<h1>rlang 0.3.0<a class="headerlink" href="#rlang-0-3-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id2">
<h2>Breaking changes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>The rlang API is still maturing. In this section, you’ll find hard
breaking changes. See the life cycle section below for an exhaustive
list of API changes.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">quo_text()</span></code> now deparses non-syntactic symbols with backticks:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">quo_text</span><span class="p">(</span><span class="n">sym</span><span class="p">(</span><span class="s2">&quot;foo+&quot;</span><span class="p">))</span>
<span class="c1">#&gt; [1] &quot;`foo+`&quot;</span>
</pre></div>
</div>
<p>This caused a number of issues in reverse dependencies as
<code class="docutils literal notranslate"><span class="pre">quo_text()</span></code> tends to be used for converting symbols to strings.
<code class="docutils literal notranslate"><span class="pre">quo_text()</span></code> and <code class="docutils literal notranslate"><span class="pre">quo_name()</span></code> should not be used for this purpose
because they are general purpose deparsers. These functions should
generally only be used for printing outputs or creating default
labels. If you need to convert symbols to strings, please use
<code class="docutils literal notranslate"><span class="pre">as_string()</span></code> rather than <code class="docutils literal notranslate"><span class="pre">quo_text()</span></code>.</p>
<p>We have extended the documentation of <code class="docutils literal notranslate"><span class="pre">?quo_text</span></code> and <code class="docutils literal notranslate"><span class="pre">?quo_name</span></code> to
make these points clearer.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">exprs()</span></code> no longer flattens quosures. <code class="docutils literal notranslate"><span class="pre">exprs(!!!quos(x,</span> <span class="pre">y))</span></code> is now
equivalent to <code class="docutils literal notranslate"><span class="pre">quos(x,</span> <span class="pre">y)</span></code>.</p></li>
<li><p>The sentinel for removing arguments in <code class="docutils literal notranslate"><span class="pre">call_modify()</span></code> has been
changed from <code class="docutils literal notranslate"><span class="pre">NULL</span></code> to <code class="docutils literal notranslate"><span class="pre">zap()</span></code>. This breaking change is motivated
by the ambiguity of <code class="docutils literal notranslate"><span class="pre">NULL</span></code> with valid argument values.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">call_modify</span><span class="p">(</span><span class="n">call</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span>  <span class="c1"># Add `arg = NULL` to the call</span>
<span class="nf">call_modify</span><span class="p">(</span><span class="n">call</span><span class="p">,</span> <span class="n">arg</span> <span class="o">=</span> <span class="nf">zap</span><span class="p">())</span> <span class="c1"># Remove the `arg` argument from the call</span>
</pre></div>
</div>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">%&#64;%</span></code> operator now quotes its input and supports S4 objects.
This makes it directly equivalent to <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> except that it extracts
attributes for non-S4 objects (#207).</p></li>
<li><p>Taking the <code class="docutils literal notranslate"><span class="pre">env_parent()</span></code> of the empty environment is now an error.</p></li>
</ul>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>The changes for this version are organised around three main themes:
error reporting, tidy eval, and tidy dots.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> now records backtraces automatically in the error object.
Errors thrown with <code class="docutils literal notranslate"><span class="pre">abort()</span></code> invite users to call
<code class="docutils literal notranslate"><span class="pre">rlang::last_error()</span></code> to see a backtrace and help identifying where
and why the error occurred. The backtraces created by rlang (you can
create one manually with <code class="docutils literal notranslate"><span class="pre">trace_back()</span></code>) are printed in a simplified
form by default that removes implementation details from the
backtrace. To see the full backtrace, call
<code class="docutils literal notranslate"><span class="pre">summary(rlang::last_error())</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> also gains a <code class="docutils literal notranslate"><span class="pre">parent</span></code> argument. This is meant for
situations where you’re calling a low level API (to download a file,
parse a JSON file, etc) and would like to intercept errors with
<code class="docutils literal notranslate"><span class="pre">base::tryCatch()</span></code> or <code class="docutils literal notranslate"><span class="pre">rlang::with_handlers()</span></code> and rethrow them with
a high-level message. Call <code class="docutils literal notranslate"><span class="pre">abort()</span></code> with the intercepted error as
the <code class="docutils literal notranslate"><span class="pre">parent</span></code> argument. When the user prints <code class="docutils literal notranslate"><span class="pre">rlang::last_error()</span></code>,
the backtrace will be shown in two sections corresponding to the
high-level and low-level contexts.</p>
<p>In order to get segmented backtraces, the low-level error has to be
thrown with <code class="docutils literal notranslate"><span class="pre">abort()</span></code>. When that’s not the case, you can call the
low-level function within <code class="docutils literal notranslate"><span class="pre">with_abort()</span></code> to automatically promote
all errors to rlang errors.</p>
</li>
<li><p>The tidy eval changes are mostly for developers of data masking
APIs. The main user-facing change is that <code class="docutils literal notranslate"><span class="pre">.data[[</span></code> is now an
unquote operator so that <code class="docutils literal notranslate"><span class="pre">var</span></code> in <code class="docutils literal notranslate"><span class="pre">.data[[var]]</span></code> is never masked by
data frame columns and always picked from the environment. This
makes the pronoun safe for programming in functions.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">!!!</span></code> operator now supports all classed objects like factors. It
calls <code class="docutils literal notranslate"><span class="pre">as.list()</span></code> on S3 objects and <code class="docutils literal notranslate"><span class="pre">as(x,</span> <span class="pre">&quot;list&quot;)</span></code> on S4 objects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dots_list()</span></code> gains several arguments to control how dots are
collected. You can control the selection of arguments with the same
name with <code class="docutils literal notranslate"><span class="pre">.homonyms</span></code> (keep first, last, all, or abort). You can
also elect to preserve empty arguments with <code class="docutils literal notranslate"><span class="pre">.preserve_empty</span></code>.</p></li>
</ul>
</div>
<div class="section" id="conditions-and-errors">
<h2>Conditions and errors<a class="headerlink" href="#conditions-and-errors" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>New <code class="docutils literal notranslate"><span class="pre">trace_back()</span></code> captures a backtrace. Compared to the base R
traceback, it contains additional structure about the relationship
between frames. It comes with tools for automatically restricting to
frames after a certain environment on the stack, and to simplify
when printing. These backtraces are now recorded in errors thrown by
<code class="docutils literal notranslate"><span class="pre">abort()</span></code> (see below).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">parent</span></code> argument to specify a parent error. This
is meant for situations where a low-level error is expected
(e.g. download or parsing failed) and you’d like to throw an error
with higher level information. Specifying the low-level error as
parent makes it possible to partition the backtraces based on
ancestry.</p></li>
<li><p>Errors thrown with <code class="docutils literal notranslate"><span class="pre">abort()</span></code> now embed a backtrace in the condition
object. It is no longer necessary to record a trace with a calling
handler for such errors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_abort()</span></code> runs expressions in a context where all errors are
promoted to rlang errors and gain a backtrace.</p></li>
<li><p>Unhandled errors thrown by <code class="docutils literal notranslate"><span class="pre">abort()</span></code> are now automatically saved and
can be retrieved with <code class="docutils literal notranslate"><span class="pre">rlang::last_error()</span></code>. The error prints with a
simplified backtrace. Call <code class="docutils literal notranslate"><span class="pre">summary(last_error())</span></code> to see the full
backtrace.</p></li>
<li><p>New experimental option <code class="docutils literal notranslate"><span class="pre">rlang__backtrace_on_error</span></code> to display
backtraces alongside error messages. See <code class="docutils literal notranslate"><span class="pre">?rlang::abort</span></code> for
supported options.</p></li>
<li><p>The new <code class="docutils literal notranslate"><span class="pre">signal()</span></code> function completes the <code class="docutils literal notranslate"><span class="pre">abort()</span></code>, <code class="docutils literal notranslate"><span class="pre">warn()</span></code> and
<code class="docutils literal notranslate"><span class="pre">inform()</span></code> family. It creates and signals a bare condition.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">interrupt()</span></code> function to simulate an user interrupt from R
code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> now dispatches messages, warnings, errors and
interrupts to the relevant signalling functions (<code class="docutils literal notranslate"><span class="pre">message()</span></code>,
<code class="docutils literal notranslate"><span class="pre">warning()</span></code>, <code class="docutils literal notranslate"><span class="pre">stop()</span></code> and the C function <code class="docutils literal notranslate"><span class="pre">Rf_onintr()</span></code>). This makes
it a good choice to resignal a captured condition.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">cnd_type()</span></code> helper to determine the type of a condition
(<code class="docutils literal notranslate"><span class="pre">&quot;condition&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;message&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;warning&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;error&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;interrupt&quot;</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abort()</span></code>, <code class="docutils literal notranslate"><span class="pre">warn()</span></code> and <code class="docutils literal notranslate"><span class="pre">inform()</span></code> now accepts metadata with <code class="docutils literal notranslate"><span class="pre">...</span></code>.
The data are stored in the condition and can be examined by user
handlers.</p>
<p>Consequently all arguments have been renamed and prefixed with a dot
(to limit naming conflicts between arguments and metadata names).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_handlers()</span></code> treats bare functions as exiting handlers
(equivalent to handlers supplied to <code class="docutils literal notranslate"><span class="pre">tryCatch()</span></code>). It also supports
the formula shortcut for lambda functions (as in purrr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_handlers()</span></code> now produces a cleaner stack trace.</p></li>
</ul>
</div>
<div class="section" id="tidy-dots">
<h2>Tidy dots<a class="headerlink" href="#tidy-dots" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The input types of <code class="docutils literal notranslate"><span class="pre">!!!</span></code> have been standardised. <code class="docutils literal notranslate"><span class="pre">!!!</span></code> is generally
defined on vectors: it takes a vector (typically, a list) and
unquotes each element as a separate argument. The standardisation
makes <code class="docutils literal notranslate"><span class="pre">!!!</span></code> behave the same in functions taking dots with <code class="docutils literal notranslate"><span class="pre">list2()</span></code>
and in quoting functions. <code class="docutils literal notranslate"><span class="pre">!!!</span></code> accepts these types:</p>
<ul class="simple">
<li><p>Lists, pairlists, and atomic vectors. If they have a class, they
are converted with <code class="docutils literal notranslate"><span class="pre">base::as.list()</span></code> to allow S3 dispatch.
Following this change, objects like factors can now be spliced
without data loss.</p></li>
<li><p>S4 objects. These are converted with <code class="docutils literal notranslate"><span class="pre">as(obj,</span> <span class="pre">&quot;list&quot;)</span></code> before
splicing.</p></li>
<li><p>Quoted blocks of expressions, i.e. <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">}</span></code> calls</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">!!!</span></code> disallows:</p>
<ul class="simple">
<li><p>Any other objects like functions or environments, but also
language objects like formula, symbols, or quosures.</p></li>
</ul>
<p>Quoting functions used to automatically wrap language objects in
lists to make them spliceable. This behaviour is now soft-deprecated
and it is no longer valid to write <code class="docutils literal notranslate"><span class="pre">!!!enquo(x)</span></code>. Please unquote
scalar objects with <code class="docutils literal notranslate"><span class="pre">!!</span></code> instead.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">dots_list()</span></code>, <code class="docutils literal notranslate"><span class="pre">enexprs()</span></code> and <code class="docutils literal notranslate"><span class="pre">enquos()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">.homonyms</span></code>
argument to control how to treat arguments with the same name.
The default is to keep them. Set it to <code class="docutils literal notranslate"><span class="pre">&quot;first&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;last&quot;</span></code> to keep
only the first or last occurrences. Set it to <code class="docutils literal notranslate"><span class="pre">&quot;error&quot;</span></code> to raise an
informative error about the arguments with duplicated names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enexprs()</span></code> and <code class="docutils literal notranslate"><span class="pre">enquos()</span></code> now support <code class="docutils literal notranslate"><span class="pre">.ignore_empty</span> <span class="pre">=</span> <span class="pre">&quot;all&quot;</span></code>
with named arguments as well (#414).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dots_list()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">.preserve_empty</span></code> argument. When <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, empty
arguments are stored as missing arguments (see <code class="docutils literal notranslate"><span class="pre">?missing_arg</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dots_list()</span></code>, <code class="docutils literal notranslate"><span class="pre">enexprs()</span></code> and <code class="docutils literal notranslate"><span class="pre">enquos()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">.check_assign</span></code>
argument. When <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>, a warning is issued when a <code class="docutils literal notranslate"><span class="pre">&lt;-</span></code> call is
detected in <code class="docutils literal notranslate"><span class="pre">...</span></code>. No warning is issued if the assignment is wrapped
in brackets like <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">a</span> <span class="pre">&lt;-</span> <span class="pre">1</span> <span class="pre">}</span></code>. The warning lets users know about a
possible typo in their code (assigning instead of matching a
function parameter) and requires them to be explicit that they
really want to assign to a variable by wrapping in parentheses.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lapply(list(quote(foo)),</span> <span class="pre">list2)</span></code> no longer evaluates <code class="docutils literal notranslate"><span class="pre">foo</span></code> (#580).</p></li>
</ul>
</div>
<div class="section" id="tidy-eval">
<h2>Tidy eval<a class="headerlink" href="#tidy-eval" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>You can now unquote quosured symbols as LHS of <code class="docutils literal notranslate"><span class="pre">:=</span></code>. The symbol is
automatically unwrapped from the quosure.</p></li>
<li><p>Quosure methods have been defined for common operations like
<code class="docutils literal notranslate"><span class="pre">==</span></code>. These methods fail with an informative error message
suggesting to unquote the quosure (#478, #tidyverse/dplyr#3476).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_data_pronoun()</span></code> now accepts data masks. If the mask has multiple
environments, all of these are looked up when subsetting the pronoun.
Function objects stored in the mask are bypassed.</p></li>
<li><p>It is now possible to unquote strings in function position. This is
consistent with how the R parser coerces strings to symbols. These
two expressions are now equivalent: <code class="docutils literal notranslate"><span class="pre">expr(&quot;foo&quot;())</span></code> and
<code class="docutils literal notranslate"><span class="pre">expr((!!&quot;foo&quot;)())</span></code>.</p></li>
<li><p>Quosures converted to functions with <code class="docutils literal notranslate"><span class="pre">as_function()</span></code> now support
nested quosures.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expr_deparse()</span></code> (used to print quosures at the console) now escapes
special characters. For instance, newlines now print as <code class="docutils literal notranslate"><span class="pre">&quot;\n&quot;</span></code> (#484).
This ensures that the roundtrip <code class="docutils literal notranslate"><span class="pre">parse_expr(expr_deparse(x))</span></code> is not
lossy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new_data_mask()</span></code> now throws an error when <code class="docutils literal notranslate"><span class="pre">bottom</span></code> is not a child
of <code class="docutils literal notranslate"><span class="pre">top</span></code> (#551).</p></li>
<li><p>Formulas are now evaluated in the correct environment within
<code class="docutils literal notranslate"><span class="pre">eval_tidy()</span></code>. This fixes issues in dplyr and other tidy-evaluation
interfaces.</p></li>
<li><p>New functions <code class="docutils literal notranslate"><span class="pre">new_quosures()</span></code> and <code class="docutils literal notranslate"><span class="pre">as_quosures()</span></code> to create or
coerce to a list of quosures. This is a small S3 class that ensures
two invariants on subsetting and concatenation: that each element is
a quosure and that the list is always named even if only with a
vector of empty strings.</p></li>
</ul>
</div>
<div class="section" id="environments">
<h2>Environments<a class="headerlink" href="#environments" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">env()</span></code> now treats a single unnamed argument as the parent of the
new environment. Consequently, <code class="docutils literal notranslate"><span class="pre">child_env()</span></code> is now superfluous and
is now in questioning life cycle.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">current_env()</span></code> and <code class="docutils literal notranslate"><span class="pre">current_fn()</span></code> functions to retrieve the
current environment or the function being evaluated. They are
equivalent to <code class="docutils literal notranslate"><span class="pre">base::environment()</span></code> and <code class="docutils literal notranslate"><span class="pre">base::sys.function()</span></code>
called without argument.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_get()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_get_list()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">default</span></code> argument to
provide a default value for non-existing bindings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_poke()</span></code> now returns the old value invisibly rather than the
input environment.</p></li>
<li><p>The new function <code class="docutils literal notranslate"><span class="pre">env_name()</span></code> returns the name of an environment.
It always adds the “namespace:” prefix to namespace names. It
returns “global” instead of “.GlobalEnv” or “R_GlobalEnv”, “empty”
instead of “R_EmptyEnv”. The companion <code class="docutils literal notranslate"><span class="pre">env_label()</span></code> is like
<code class="docutils literal notranslate"><span class="pre">env_name()</span></code> but returns the memory address for anonymous
environments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_parents()</span></code> now returns a named list. The names are taken with
<code class="docutils literal notranslate"><span class="pre">env_name()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_parents()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_tail()</span></code> now stop at the global environment
by default. This can be changed with the <code class="docutils literal notranslate"><span class="pre">last</span></code> argument. The empty
environment is always a stopping condition so you can take the
parents or the tail of an environment on the search path without
changing the default.</p></li>
<li><p>New predicates <code class="docutils literal notranslate"><span class="pre">env_binding_are_active()</span></code> and
<code class="docutils literal notranslate"><span class="pre">env_binding_are_lazy()</span></code> detect the kind of bindings in an
environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_binding_lock()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_binding_unlock()</span></code> allows to lock and
unlock multiple bindings. The predicate <code class="docutils literal notranslate"><span class="pre">env_binding_are_locked()</span></code>
tests if bindings are locked.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_lock()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_is_locked()</span></code> lock an environment or test if
an environment is locked.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_print()</span></code> pretty-prints environments. It shows the contents (up
to 20 elements) and the properties of the environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_scoped()</span></code> has been soft-deprecated and renamed to
<code class="docutils literal notranslate"><span class="pre">is_attached()</span></code>. It now supports environments in addition to search
names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_bind_lazy()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_bind_active()</span></code> now support quosures.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_bind_exprs()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_bind_fns()</span></code> are soft-deprecated and
renamed to <code class="docutils literal notranslate"><span class="pre">env_bind_lazy()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_bind_active()</span></code> for clarity
and consistency.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_bind()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_bind_exprs()</span></code>, and <code class="docutils literal notranslate"><span class="pre">env_bind_fns()</span></code> now return
the list of old binding values (or missing arguments when there is
no old value). This makes it easy to restore the original
environment state:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>old &lt;- env_bind(env, foo = &quot;foo&quot;, bar = &quot;bar&quot;)
env_bind(env, !!!old)
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_bind()</span></code> now supports binding missing arguments and removing
bindings with zap sentinels. <code class="docutils literal notranslate"><span class="pre">env_bind(env,</span> <span class="pre">foo</span> <span class="pre">=</span> <span class="pre">)</span></code> binds a missing
argument and <code class="docutils literal notranslate"><span class="pre">env_bind(env,</span> <span class="pre">foo</span> <span class="pre">=</span> <span class="pre">zap())</span></code> removes the <code class="docutils literal notranslate"><span class="pre">foo</span></code>
binding.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">inherit</span></code> argument of <code class="docutils literal notranslate"><span class="pre">env_get()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_get_list()</span></code> has
changed position. It now comes after <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scoped_bindings()</span></code> and <code class="docutils literal notranslate"><span class="pre">with_bindings()</span></code> can now be called without
bindings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_clone()</span></code> now recreates active bindings correctly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_get()</span></code> now evaluates promises and active bindings since these are
internal objects which should not be exposed at the R level (#554)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_print()</span></code> calls <code class="docutils literal notranslate"><span class="pre">get_env()</span></code> on its argument, making it easier to
see the environment of closures and quosures (#567).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">env_get()</span></code> now supports retrieving missing arguments when <code class="docutils literal notranslate"><span class="pre">inherit</span></code>
is <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>.</p></li>
</ul>
</div>
<div class="section" id="calls">
<h2>Calls<a class="headerlink" href="#calls" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_call()</span></code> now accepts multiple namespaces. For instance
<code class="docutils literal notranslate"><span class="pre">is_call(x,</span> <span class="pre">&quot;list&quot;,</span> <span class="pre">ns</span> <span class="pre">=</span> <span class="pre">c(&quot;&quot;,</span> <span class="pre">&quot;base&quot;))</span></code> will match if <code class="docutils literal notranslate"><span class="pre">x</span></code> is
<code class="docutils literal notranslate"><span class="pre">list()</span></code> or if it’s <code class="docutils literal notranslate"><span class="pre">base::list()</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_modify()</span></code> has better support for <code class="docutils literal notranslate"><span class="pre">...</span></code> and now treats it like
a named argument. <code class="docutils literal notranslate"><span class="pre">call_modify(call,</span> <span class="pre">...</span> <span class="pre">=</span> <span class="pre">)</span></code> adds <code class="docutils literal notranslate"><span class="pre">...</span></code> to the call
and <code class="docutils literal notranslate"><span class="pre">call_modify(call,</span> <span class="pre">...</span> <span class="pre">=</span> <span class="pre">NULL)</span></code> removes it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_modify()</span></code> now preserves empty arguments. It is no longer
necessary to use <code class="docutils literal notranslate"><span class="pre">missing_arg()</span></code> to add a missing argument to a
call. This is possible thanks to the new <code class="docutils literal notranslate"><span class="pre">.preserve_empty</span></code> option of
<code class="docutils literal notranslate"><span class="pre">dots_list()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_modify()</span></code> now supports removing unexisting arguments (#393)
and passing multiple arguments with the same name (#398). The new
<code class="docutils literal notranslate"><span class="pre">.homonyms</span></code> argument controls how to treat these arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_standardise()</span></code> now handles primitive functions like <code class="docutils literal notranslate"><span class="pre">~</span></code>
properly (#473).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_print_type()</span></code> indicates how a call is deparsed and printed at
the console by R: prefix, infix, and special form.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">call_</span></code> functions such as <code class="docutils literal notranslate"><span class="pre">call_modify()</span></code> now correctly check
that their input is the right type (#187).</p></li>
</ul>
</div>
<div class="section" id="other-improvements-and-fixes">
<h2>Other improvements and fixes<a class="headerlink" href="#other-improvements-and-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>New function <code class="docutils literal notranslate"><span class="pre">zap()</span></code> returns a sentinel that instructs functions
like <code class="docutils literal notranslate"><span class="pre">env_bind()</span></code> or <code class="docutils literal notranslate"><span class="pre">call_modify()</span></code> that objects are to be removed.</p></li>
<li><p>New function <code class="docutils literal notranslate"><span class="pre">rep_named()</span></code> repeats value along a character vector of
names.</p></li>
<li><p>New function <code class="docutils literal notranslate"><span class="pre">exec()</span></code> is a simpler replacement to <code class="docutils literal notranslate"><span class="pre">invoke()</span></code>
(#536). <code class="docutils literal notranslate"><span class="pre">invoke()</span></code> has been soft-deprecated.</p></li>
<li><p>Lambda functions created from formulas with <code class="docutils literal notranslate"><span class="pre">as_function()</span></code> are now
classed. Use <code class="docutils literal notranslate"><span class="pre">is_lambda()</span></code> to check a function was created with the
formula shorthand.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_integerish()</span></code> now supports large double values (#578).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">are_na()</span></code> now requires atomic vectors (#558).</p></li>
<li><p>The operator <code class="docutils literal notranslate"><span class="pre">%&#64;%</span></code> has now a replacement version to update
attributes of an object (#207).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fn_body()</span></code> always returns a <code class="docutils literal notranslate"><span class="pre">{</span></code> block, even if the function has a
single expression. For instance <code class="docutils literal notranslate"><span class="pre">fn_body(function(x)</span> <span class="pre">do())</span> </code> returns
<code class="docutils literal notranslate"><span class="pre">quote({</span> <span class="pre">do()</span> <span class="pre">})</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_string()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> for <code class="docutils literal notranslate"><span class="pre">NA_character_</span></code>.</p></li>
<li><p>The vector predicates have been rewritten in C for performance.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">finite</span></code> argument of <code class="docutils literal notranslate"><span class="pre">is_integerish()</span></code> is now <code class="docutils literal notranslate"><span class="pre">NULL</span></code> by
default. Missing values are now considered as non-finite for
consistency with <code class="docutils literal notranslate"><span class="pre">base::is.finite()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_bare_integerish()</span></code> and <code class="docutils literal notranslate"><span class="pre">is_scalar_integerish()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">finite</span></code>
argument for consistency with <code class="docutils literal notranslate"><span class="pre">is_integerish()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flatten_if()</span></code> and <code class="docutils literal notranslate"><span class="pre">squash_if()</span></code> now handle primitive functions like
<code class="docutils literal notranslate"><span class="pre">base::is.list()</span></code> as predicates.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_symbol()</span></code> now accepts a character vector of names to mach the
symbol against.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parse_exprs()</span></code> and <code class="docutils literal notranslate"><span class="pre">parse_quos()</span></code> now support character vectors.
Note that the output may be longer than the input as each string may
yield multiple expressions (such as <code class="docutils literal notranslate"><span class="pre">&quot;foo;</span> <span class="pre">bar&quot;</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parse_quos()</span></code> now adds the <code class="docutils literal notranslate"><span class="pre">quosures</span></code> class to its output.</p></li>
</ul>
</div>
<div class="section" id="id3">
<h2>Lifecycle<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="soft-deprecated-functions-and-arguments">
<h3>Soft-deprecated functions and arguments<a class="headerlink" href="#soft-deprecated-functions-and-arguments" title="Permalink to this headline">¶</a></h3>
<p>rlang 0.3.0 introduces a new warning mechanism for soft-deprecated
functions and arguments. A warning is issued, but only under one of
these circumstances:</p>
<ul class="simple">
<li><p>rlang has been attached with a <code class="docutils literal notranslate"><span class="pre">library()</span></code> call.</p></li>
<li><p>The deprecated function has been called from the global environment.</p></li>
</ul>
<p>In addition, deprecation warnings appear only once per session in
order to not be disruptive.</p>
<p>Deprecation warnings shouldn’t make R CMD check fail for packages
using testthat. However, <code class="docutils literal notranslate"><span class="pre">expect_silent()</span></code> can transform the warning
to a hard failure.</p>
<div class="section" id="id4">
<h4>tidyeval<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">.data[[foo]]</span></code> is now an unquote operator. This guarantees that
<code class="docutils literal notranslate"><span class="pre">foo</span></code> is evaluated in the context rather than the data mask and
makes it easier to treat <code class="docutils literal notranslate"><span class="pre">.data[[&quot;bar&quot;]]</span></code> the same way as a
symbol. For instance, this will help ensuring that <code class="docutils literal notranslate"><span class="pre">group_by(df,</span> <span class="pre">.data[[&quot;name&quot;]])</span></code> and <code class="docutils literal notranslate"><span class="pre">group_by(df,</span> <span class="pre">name)</span></code> produce the same column
name.</p></li>
<li><p>Automatic naming of expressions now uses a new deparser (still
unexported) instead of <code class="docutils literal notranslate"><span class="pre">quo_text()</span></code>. Following this change,
automatic naming is now compatible with all object types (via
<code class="docutils literal notranslate"><span class="pre">pillar::type_sum()</span></code> if available), prevents multi-line names, and
ensures <code class="docutils literal notranslate"><span class="pre">name</span></code> and <code class="docutils literal notranslate"><span class="pre">.data[[&quot;name&quot;]]</span></code> are given the same default
name.</p></li>
<li><p>Supplying a name with <code class="docutils literal notranslate"><span class="pre">!!!</span></code> calls is soft-deprecated. This name is
ignored because only the names of the spliced vector are applied.</p></li>
<li><p>Quosure lists returned by <code class="docutils literal notranslate"><span class="pre">quos()</span></code> and <code class="docutils literal notranslate"><span class="pre">enquos()</span></code> now have “list-of”
behaviour: the types of new elements are checked when adding objects
to the list. Consequently, assigning non-quosure objects to quosure
lists is now soft-deprecated. Please coerce to a bare list with
<code class="docutils literal notranslate"><span class="pre">as.list()</span></code> beforehand.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_quosure()</span></code> now requires an explicit environment for symbols and
calls. This should typically be the environment in which the
expression was created.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">names()</span></code> and <code class="docutils literal notranslate"><span class="pre">length()</span></code> methods for data pronouns are deprecated.
It is no longer valid to write <code class="docutils literal notranslate"><span class="pre">names(.data)</span></code> or <code class="docutils literal notranslate"><span class="pre">length(.data)</span></code>.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">as.character()</span></code> on quosures is soft-deprecated (#523).</p></li>
</ul>
</div>
<div class="section" id="miscellaneous">
<h4>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">get_env()</span></code> without supplying an environment is now
soft-deprecated. Please use <code class="docutils literal notranslate"><span class="pre">current_env()</span></code> to retrieve the current
environment.</p></li>
<li><p>The frame and stack API is soft-deprecated. Some of the
functionality has been replaced by <code class="docutils literal notranslate"><span class="pre">trace_back()</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">new_vector_along()</span></code> family is soft-deprecated because these
functions are longer to type than the equivalent <code class="docutils literal notranslate"><span class="pre">rep_along()</span></code> or
<code class="docutils literal notranslate"><span class="pre">rep_named()</span></code> calls without added clarity.</p></li>
<li><p>Passing environment wrappers like formulas or functions to <code class="docutils literal notranslate"><span class="pre">env_</span></code>
functions is now soft-deprecated. This internal genericity was
causing confusion (see issue #427). You should now extract the
environment separately before calling these functions.</p>
<p>This change concerns <code class="docutils literal notranslate"><span class="pre">env_depth()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_poke_parent()</span></code>,
<code class="docutils literal notranslate"><span class="pre">env_parent&lt;-</span></code>, <code class="docutils literal notranslate"><span class="pre">env_tail()</span></code>, <code class="docutils literal notranslate"><span class="pre">set_env()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_clone()</span></code>,
<code class="docutils literal notranslate"><span class="pre">env_inherits()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_bind()</span></code>, <code class="docutils literal notranslate"><span class="pre">scoped_bindings()</span></code>,
<code class="docutils literal notranslate"><span class="pre">with_bindings()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_poke()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_has()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_get()</span></code>,
<code class="docutils literal notranslate"><span class="pre">env_names()</span></code>, <code class="docutils literal notranslate"><span class="pre">env_bind_exprs()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_bind_fns()</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> now always installs a muffling restart for
non-critical conditions. Consequently the <code class="docutils literal notranslate"><span class="pre">.mufflable</span></code> argument has
been soft-deprecated and no longer has any effect.</p></li>
</ul>
</div>
</div>
<div class="section" id="deprecated-functions-and-arguments">
<h3>Deprecated functions and arguments<a class="headerlink" href="#deprecated-functions-and-arguments" title="Permalink to this headline">¶</a></h3>
<p>Deprecated functions and arguments issue a warning inconditionally,
but only once per session.</p>
<ul>
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">UQ()</span></code> and <code class="docutils literal notranslate"><span class="pre">UQS()</span></code> with the rlang namespace qualifier is
deprecated as of rlang 0.3.0. Just use the unqualified forms
instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Bad
rlang::expr(mean(rlang::UQ(var) * 100))

# Ok
rlang::expr(mean(UQ(var) * 100))

# Good
rlang::expr(mean(!!var * 100))
</pre></div>
</div>
<p>Although soft-deprecated since rlang 0.2.0, <code class="docutils literal notranslate"><span class="pre">UQ()</span></code> and <code class="docutils literal notranslate"><span class="pre">UQS()</span></code> can still be used for now.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">call</span></code> argument of <code class="docutils literal notranslate"><span class="pre">abort()</span></code> and condition constructors is now
deprecated in favour of storing full backtraces.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.standardise</span></code> argument of <code class="docutils literal notranslate"><span class="pre">call_modify()</span></code> is deprecated. Please
use <code class="docutils literal notranslate"><span class="pre">call_standardise()</span></code> beforehand.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">sentinel</span></code> argument of <code class="docutils literal notranslate"><span class="pre">env_tail()</span></code> has been deprecated and
renamed to <code class="docutils literal notranslate"><span class="pre">last</span></code>.</p></li>
</ul>
</div>
<div class="section" id="defunct-functions-and-arguments">
<h3>Defunct functions and arguments<a class="headerlink" href="#defunct-functions-and-arguments" title="Permalink to this headline">¶</a></h3>
<p>Defunct functions and arguments throw an error when used.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">as_dictionary()</span></code> is now defunct.</p></li>
<li><p>The experimental function <code class="docutils literal notranslate"><span class="pre">rst_muffle()</span></code> is now defunct. Please use
<code class="docutils literal notranslate"><span class="pre">cnd_muffle()</span></code> instead. Unlike its predecessor, <code class="docutils literal notranslate"><span class="pre">cnd_muffle()</span></code> is not
generic. It is marked as a calling handler and thus can be passed
directly to <code class="docutils literal notranslate"><span class="pre">with_handlers()</span></code> to muffle specific conditions (such as
specific subclasses of warnings).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_inform()</span></code>, <code class="docutils literal notranslate"><span class="pre">cnd_warn()</span></code> and <code class="docutils literal notranslate"><span class="pre">cnd_abort()</span></code> are retired and
defunct. The old <code class="docutils literal notranslate"><span class="pre">cnd_message()</span></code>, <code class="docutils literal notranslate"><span class="pre">cnd_warning()</span></code>, <code class="docutils literal notranslate"><span class="pre">cnd_error()</span></code> and
<code class="docutils literal notranslate"><span class="pre">new_cnd()</span></code> constructors deprecated in rlang 0.2.0 are now defunct.</p></li>
<li><p>Modifying a condition with <code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> is defunct. In addition,
creating a condition with <code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> is soft-deprecated, please
use the new function [signal()] instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inplace()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">calling()</span></code> to follow base R
terminology more closely.</p></li>
</ul>
</div>
<div class="section" id="functions-and-arguments-in-the-questioning-stage">
<h3>Functions and arguments in the questioning stage<a class="headerlink" href="#functions-and-arguments-in-the-questioning-stage" title="Permalink to this headline">¶</a></h3>
<p>We are no longer convinced these functions are the right approach but
we do not have a precise alternative yet.</p>
<ul class="simple">
<li><p>The functions from the restart API are now in the questioning
lifecycle stage. It is not clear yet whether we want to recommend
restarts as a style of programming in R.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prepend()</span></code> and <code class="docutils literal notranslate"><span class="pre">modify()</span></code> are in the questioning stage, as well as
<code class="docutils literal notranslate"><span class="pre">as_logical()</span></code>, <code class="docutils literal notranslate"><span class="pre">as_character()</span></code>, etc. We are still figuring out
what vector tools belong in rlang.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">flatten()</span></code>, <code class="docutils literal notranslate"><span class="pre">squash()</span></code> and their atomic variants are now in the
questioning lifecycle stage. They have slightly different semantics
than the flattening functions in purrr and we are currently
rethinking our approach to flattening with the new typing facilities
of the vctrs package.</p></li>
</ul>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-2-2">
<h1>rlang 0.2.2<a class="headerlink" href="#rlang-0-2-2" title="Permalink to this headline">¶</a></h1>
<p>This is a maintenance release that fixes several garbage collection
protection issues.</p>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-2-1">
<h1>rlang 0.2.1<a class="headerlink" href="#rlang-0-2-1" title="Permalink to this headline">¶</a></h1>
<p>This is a maintenance release that fixes several tidy evaluation
issues.</p>
<ul class="simple">
<li><p>Functions with tidy dots support now allow splicing atomic vectors.</p></li>
<li><p>Quosures no longer capture the current <code class="docutils literal notranslate"><span class="pre">srcref</span></code>.</p></li>
<li><p>Formulas are now evaluated in the correct environment by
<code class="docutils literal notranslate"><span class="pre">eval_tidy()</span></code>. This fixes issues in dplyr and other tidy-evaluation
interfaces.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-2-0">
<h1>rlang 0.2.0<a class="headerlink" href="#rlang-0-2-0" title="Permalink to this headline">¶</a></h1>
<p>This release of rlang is mostly an effort at polishing the tidy
evaluation framework. All tidy eval functions and operators have been
rewritten in C in order to improve performance. Capture of expression,
quasiquotation, and evaluation of quosures are now vastly faster. On
the UI side, many of the inconveniences that affected the first
release of rlang have been solved:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">!!</span></code> operator now has the precedence of unary <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> which
allows a much more natural syntax: <code class="docutils literal notranslate"><span class="pre">!!a</span> <span class="pre">&gt;</span> <span class="pre">b</span></code> only unquotes <code class="docutils literal notranslate"><span class="pre">a</span></code>
rather than the whole <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&gt;</span> <span class="pre">b</span></code> expression.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enquo()</span></code> works in magrittr pipes: <code class="docutils literal notranslate"><span class="pre">mtcars</span> <span class="pre">%&gt;%</span> <span class="pre">select(!!enquo(var))</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enquos()</span></code> is a variant of <code class="docutils literal notranslate"><span class="pre">quos()</span></code> that has a more natural
interface for capturing multiple arguments and <code class="docutils literal notranslate"><span class="pre">...</span></code>.</p></li>
</ul>
<p>See the first section below for a complete list of changes to the tidy
evaluation framework.</p>
<p>This release also polishes the rlang API. Many functions have been
renamed as we get a better feel for the consistency and clarity of the
API. Note that rlang as a whole is still maturing and some functions
are even experimental. In order to make things clearer for users of
rlang, we have started to develop a set of conventions to document the
current stability of each function. You will now find “lifecycle”
sections in documentation topics. In addition we have gathered all
lifecycle information in the <code class="docutils literal notranslate"><span class="pre">?rlang::lifecycle</span></code> help page. Please
only use functions marked as stable in your projects unless you are
prepared to deal with occasional backward incompatible updates.</p>
<div class="section" id="id5">
<h2>Tidy evaluation<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The backend for <code class="docutils literal notranslate"><span class="pre">quos()</span></code>, <code class="docutils literal notranslate"><span class="pre">exprs()</span></code>, <code class="docutils literal notranslate"><span class="pre">list2()</span></code>, <code class="docutils literal notranslate"><span class="pre">dots_list()</span></code>, etc
is now written in C. This greatly improve the performance of dots
capture, especially with the splicing operator <code class="docutils literal notranslate"><span class="pre">!!!</span></code> which now
scales much better (you’ll see a 1000x performance gain in some
cases). The unquoting algorithm has also been improved which makes
<code class="docutils literal notranslate"><span class="pre">enexpr()</span></code> and <code class="docutils literal notranslate"><span class="pre">enquo()</span></code> more efficient as well.</p></li>
<li><p>The tidy eval <code class="docutils literal notranslate"><span class="pre">!!</span></code> operator now binds tightly. You no longer have to
wrap it in parentheses, i.e. <code class="docutils literal notranslate"><span class="pre">!!x</span> <span class="pre">&gt;</span> <span class="pre">y</span></code> will only unquote <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>Technically the <code class="docutils literal notranslate"><span class="pre">!!</span></code> operator has the same precedence as unary <code class="docutils literal notranslate"><span class="pre">-</span></code>
and <code class="docutils literal notranslate"><span class="pre">+</span></code>. This means that <code class="docutils literal notranslate"><span class="pre">!!a:b</span></code> and <code class="docutils literal notranslate"><span class="pre">!!a</span> <span class="pre">+</span> <span class="pre">b</span></code> are equivalent to
<code class="docutils literal notranslate"><span class="pre">(!!a):b</span></code> and <code class="docutils literal notranslate"><span class="pre">(!!a)</span> <span class="pre">+</span> <span class="pre">b</span></code>. On the other hand <code class="docutils literal notranslate"><span class="pre">!!a^b</span></code> and <code class="docutils literal notranslate"><span class="pre">!!a$b</span></code> are
equivalent to<code class="docutils literal notranslate"><span class="pre">!!(a^b)</span></code> and <code class="docutils literal notranslate"><span class="pre">!!(a$b)</span></code>.</p>
</li>
<li><p>The print method for quosures has been greatly improved. Quosures no
longer appear as formulas but as expressions prefixed with <code class="docutils literal notranslate"><span class="pre">^</span></code>;
quosures are colourised according to their environment; unquoted
objects are displayed between angular brackets instead of code
(i.e. an unquoted integer vector is shown as <code class="docutils literal notranslate"><span class="pre">&lt;int:</span> <span class="pre">1,</span> <span class="pre">2&gt;</span></code> rather
than <code class="docutils literal notranslate"><span class="pre">1:2</span></code>); unquoted S3 objects are displayed using
<code class="docutils literal notranslate"><span class="pre">pillar::type_sum()</span></code> if available.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">enquos()</span></code> function to capture arguments. It treats <code class="docutils literal notranslate"><span class="pre">...</span></code> the
same way as <code class="docutils literal notranslate"><span class="pre">quos()</span></code> but can also capture named arguments just like
<code class="docutils literal notranslate"><span class="pre">enquo()</span></code>, i.e. one level up. By comparison <code class="docutils literal notranslate"><span class="pre">quos(arg)</span></code> only
captures the name <code class="docutils literal notranslate"><span class="pre">arg</span></code> rather than the expression supplied to the
<code class="docutils literal notranslate"><span class="pre">arg</span></code> argument.</p>
<p>In addition, <code class="docutils literal notranslate"><span class="pre">enexprs()</span></code> is like <code class="docutils literal notranslate"><span class="pre">enquos()</span></code> but like <code class="docutils literal notranslate"><span class="pre">exprs()</span></code> it
returns bare expressions. And <code class="docutils literal notranslate"><span class="pre">ensyms()</span></code> expects strings or symbols.</p>
</li>
<li><p>It is now possible to use <code class="docutils literal notranslate"><span class="pre">enquo()</span></code> within a magrittr pipe:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>select_one &lt;- function(df, var) {
  df %&gt;% dplyr::select(!!enquo(var))
}
</pre></div>
</div>
<p>Technically, this is because <code class="docutils literal notranslate"><span class="pre">enquo()</span></code> now also captures arguments
in parents of the current environment rather than just in the
current environment. The flip side of this increased flexibility is
that if you made a typo in the name of the variable you want to
capture, and if an object of that name exists anywhere in the parent
contexts, you will capture that object rather than getting an error.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">quo_expr()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">quo_squash()</span></code> in order to better
reflect that it is a lossy operation that flattens all nested
quosures.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!!!</span></code> now accepts any kind of objects for consistency. Scalar types
are treated as vectors of length 1. Previously only symbolic objects
like symbols and calls were treated as such.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ensym()</span></code> is a new variant of <code class="docutils literal notranslate"><span class="pre">enexpr()</span></code> that expects a symbol or a
string and always returns a symbol. If a complex expression is
supplied it fails with an error.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exprs()</span></code> and <code class="docutils literal notranslate"><span class="pre">quos()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">.unquote_names</span></code> arguments to switch
off interpretation of <code class="docutils literal notranslate"><span class="pre">:=</span></code> as a name operator. This should be useful
for programming on the language targetting APIs such as
data.table.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exprs()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">.named</span></code> option to auto-label its arguments (#267).</p></li>
<li><p>Functions taking dots by value rather than by expression
(e.g. regular functions, not quoting functions) have a more
restricted set of unquoting operations. They only support <code class="docutils literal notranslate"><span class="pre">:=</span></code> and
<code class="docutils literal notranslate"><span class="pre">!!!</span></code>, and only at top-level. I.e. <code class="docutils literal notranslate"><span class="pre">dots_list(!!!</span> <span class="pre">x)</span></code> is valid but
not <code class="docutils literal notranslate"><span class="pre">dots_list(nested_call(!!!</span> <span class="pre">x))</span></code> (#217).</p></li>
<li><p>Functions taking dots with <code class="docutils literal notranslate"><span class="pre">list2()</span></code> or <code class="docutils literal notranslate"><span class="pre">dots_list()</span></code> now support
splicing of <code class="docutils literal notranslate"><span class="pre">NULL</span></code> values. <code class="docutils literal notranslate"><span class="pre">!!!</span> <span class="pre">NULL</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">!!!</span> <span class="pre">list()</span></code>
(#242).</p></li>
<li><p>Capture operators now support evaluated arguments. Capturing a
forced or evaluated argument is exactly the same as unquoting that
argument: the actual object (even if a vector) is inlined in the
expression. Capturing a forced argument occurs when you use
<code class="docutils literal notranslate"><span class="pre">enquo()</span></code>, <code class="docutils literal notranslate"><span class="pre">enexpr()</span></code>, etc too late. It also happens when your
quoting function is supplied to <code class="docutils literal notranslate"><span class="pre">lapply()</span></code> or when you try to quote
the first argument of an S3 method (which is necessarily evaluated
in order to detect which class to dispatch to). (#295, #300).</p></li>
<li><p>Parentheses around <code class="docutils literal notranslate"><span class="pre">!!</span></code> are automatically removed. This makes the
generated expression call cleaner: <code class="docutils literal notranslate"><span class="pre">(!!</span> <span class="pre">sym(&quot;name&quot;))(arg)</span></code>. Note
that removing the parentheses will never affect the actual
precedence within the expression as the parentheses are only useful
when parsing code as text. The parentheses will also be added by R
when printing code if needed (#296).</p></li>
<li><p>Quasiquotation now supports <code class="docutils literal notranslate"><span class="pre">!!</span></code> and <code class="docutils literal notranslate"><span class="pre">!!!</span></code> as functional forms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>expr(`!!`(var))
quo(call(`!!!`(var)))
</pre></div>
</div>
<p>This is consistent with the way native R operators parses to
function calls. These new functional forms are to be preferred to
<code class="docutils literal notranslate"><span class="pre">UQ()</span></code> and <code class="docutils literal notranslate"><span class="pre">UQS()</span></code>. We are now questioning the latter and might
deprecate them in a future release.</p>
</li>
<li><p>The quasiquotation parser now gives meaningful errors in corner
cases to help you figure out what is wrong.</p></li>
<li><p>New getters and setters for quosures: <code class="docutils literal notranslate"><span class="pre">quo_get_expr()</span></code>,
<code class="docutils literal notranslate"><span class="pre">quo_get_env()</span></code>, <code class="docutils literal notranslate"><span class="pre">quo_set_expr()</span></code>, and <code class="docutils literal notranslate"><span class="pre">quo_set_env()</span></code>. Compared to
<code class="docutils literal notranslate"><span class="pre">get_expr()</span></code> etc, these accessors only work on quosures and are
slightly more efficient.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quo_is_symbol()</span></code> and <code class="docutils literal notranslate"><span class="pre">quo_is_call()</span></code> now take the same set of
arguments as <code class="docutils literal notranslate"><span class="pre">is_symbol()</span></code> and <code class="docutils literal notranslate"><span class="pre">is_call()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enquo()</span></code> and <code class="docutils literal notranslate"><span class="pre">enexpr()</span></code> now deal with default values correctly (#201).</p></li>
<li><p>Splicing a list no longer mutates it (#280).</p></li>
</ul>
</div>
<div class="section" id="conditions">
<h2>Conditions<a class="headerlink" href="#conditions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The new functions <code class="docutils literal notranslate"><span class="pre">cnd_warn()</span></code> and <code class="docutils literal notranslate"><span class="pre">cnd_inform()</span></code> transform
conditions to warnings or messages before signalling them.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> now returns invisibly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> and <code class="docutils literal notranslate"><span class="pre">cnd_abort()</span></code> now accept character vectors to
create typed conditions with several S3 subclasses.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_condition()</span></code> is now properly exported.</p></li>
<li><p>Condition signallers such as <code class="docutils literal notranslate"><span class="pre">cnd_signal()</span></code> and <code class="docutils literal notranslate"><span class="pre">abort()</span></code> now accept
a call depth as <code class="docutils literal notranslate"><span class="pre">call</span></code> arguments. This allows plucking a call from
further up the call stack (#30).</p></li>
<li><p>New helper <code class="docutils literal notranslate"><span class="pre">catch_cnd()</span></code>. This is a small wrapper around
<code class="docutils literal notranslate"><span class="pre">tryCatch()</span></code> that captures and returns any signalled condition. It
returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> if none was signalled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cnd_abort()</span></code> now adds the correct S3 classes for error
conditions. This fixes error catching, for instance by
<code class="docutils literal notranslate"><span class="pre">testthat::expect_error()</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id6">
<h2>Environments<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">env_get_list()</span></code> retrieves muliple bindings from an environment into
a named list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">with_bindings()</span></code> and <code class="docutils literal notranslate"><span class="pre">scoped_bindings()</span></code> establish temporary
bindings in an environment.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_namespace()</span></code> is a snake case wrapper around <code class="docutils literal notranslate"><span class="pre">isNamespace()</span></code>.</p></li>
</ul>
</div>
<div class="section" id="various-features">
<h2>Various features<a class="headerlink" href="#various-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>New functions <code class="docutils literal notranslate"><span class="pre">inherits_any()</span></code>, <code class="docutils literal notranslate"><span class="pre">inherits_all()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">inherits_only()</span></code>. They allow testing for inheritance from multiple
classes. The <code class="docutils literal notranslate"><span class="pre">_any</span></code> variant is equivalent to <code class="docutils literal notranslate"><span class="pre">base::inherits()</span></code> but
is more explicit about its behaviour. <code class="docutils literal notranslate"><span class="pre">inherits_all()</span></code> checks that
all classes are present in order and <code class="docutils literal notranslate"><span class="pre">inherits_only()</span></code> checks that
the class vectors are identical.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">fn_fmls&lt;-</span></code> and <code class="docutils literal notranslate"><span class="pre">fn_fmls_names&lt;-</span></code> setters.</p></li>
<li><p>New function experimental function <code class="docutils literal notranslate"><span class="pre">chr_unserialise_unicode()</span></code> for
turning characters serialised to unicode point form
(e.g. <code class="docutils literal notranslate"><span class="pre">&lt;U+xxxx&gt;</span></code>) to UTF-8. In addition, <code class="docutils literal notranslate"><span class="pre">as_utf8_character()</span></code> now
translates those as well. (&#64;krlmlr)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expr_label()</span></code> now supports quoted function definition calls (#275).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">call_modify()</span></code> and <code class="docutils literal notranslate"><span class="pre">call_standardise()</span></code> gain an argument to specify
an environment. The call definition is looked up in that environment
when the call to modify or standardise is not wrapped in a quosure.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_symbol()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">name</span></code> argument to check that that the symbol
name matches a string (#287).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">rlang_box</span></code> class. Its purpose is similar to the <code class="docutils literal notranslate"><span class="pre">AsIs</span></code> class
from <code class="docutils literal notranslate"><span class="pre">base::I()</span></code>, i.e. it protects a value temporarily. However it
does so by wrapping the value in a scalar list. Use <code class="docutils literal notranslate"><span class="pre">new_box()</span></code> to
create a boxed value, <code class="docutils literal notranslate"><span class="pre">is_box()</span></code> to test for a boxed value, and
<code class="docutils literal notranslate"><span class="pre">unbox()</span></code> to unbox it. <code class="docutils literal notranslate"><span class="pre">new_box()</span></code> and <code class="docutils literal notranslate"><span class="pre">is_box()</span></code> accept optional
subclass.</p></li>
<li><p>The vector constructors such as <code class="docutils literal notranslate"><span class="pre">new_integer()</span></code>,
<code class="docutils literal notranslate"><span class="pre">new_double_along()</span></code> etc gain a <code class="docutils literal notranslate"><span class="pre">names</span></code> argument. In the case of the
<code class="docutils literal notranslate"><span class="pre">_along</span></code> family it defaults to the names of the input vector.</p></li>
</ul>
</div>
<div class="section" id="bugfixes">
<h2>Bugfixes<a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>When nested quosures are evaluated with <code class="docutils literal notranslate"><span class="pre">eval_tidy()</span></code>, the <code class="docutils literal notranslate"><span class="pre">.env</span></code>
pronoun now correctly refers to the current quosure under evaluation
(#174). Previously it would always refer to the environment of the
outermost quosure.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_pairlist()</span></code> (part of the experimental API) now supports <code class="docutils literal notranslate"><span class="pre">NULL</span></code>
and objects of type pairlist (#397).</p></li>
<li><p>Fixed a performance bug in <code class="docutils literal notranslate"><span class="pre">set_names()</span></code> that caused a full copy of
the vector names (&#64;jimhester, #366).</p></li>
</ul>
</div>
<div class="section" id="api-changes">
<h2>API changes<a class="headerlink" href="#api-changes" title="Permalink to this headline">¶</a></h2>
<p>The rlang API is maturing and still in flux. However we have made an
effort to better communicate what parts are stable. We will not
introduce breaking changes for stable functions unless the payoff for
the change is worth the trouble. See <code class="docutils literal notranslate"><span class="pre">?rlang::lifecycle</span></code> for the
lifecycle status of exported functions.</p>
<ul>
<li><p>The particle “lang” has been renamed to “call”:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lang()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">call2()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new_language()</span></code> has ben renamed to <code class="docutils literal notranslate"><span class="pre">new_call()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_lang()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">is_call()</span></code>. We haven’t replaced
the <code class="docutils literal notranslate"><span class="pre">is_unary_lang()</span></code> and <code class="docutils literal notranslate"><span class="pre">is_binary_lang()</span></code> because they are
redundant with the <code class="docutils literal notranslate"><span class="pre">n</span></code> argument of <code class="docutils literal notranslate"><span class="pre">is_call()</span></code>.</p></li>
<li><p>All call accessors such as <code class="docutils literal notranslate"><span class="pre">lang_fn()</span></code>, <code class="docutils literal notranslate"><span class="pre">lang_name()</span></code>,
<code class="docutils literal notranslate"><span class="pre">lang_args()</span></code> etc are soft-deprecated and renamed with <code class="docutils literal notranslate"><span class="pre">call_</span></code>
prefix.</p></li>
</ul>
<p>In rlang 0.1 calls were called “language” objects in order to follow
the R type nomenclature as returned by <code class="docutils literal notranslate"><span class="pre">base::typeof()</span></code>. We wanted
to avoid adding to the confusion between S modes and R types. With
hindsight we find it is better to use more meaningful type names.</p>
</li>
<li><p>We now use the term “data mask” instead of “overscope”. We think
data mask is a more natural name in the context of R. We say that
that objects from user data mask objects in the current environment.
This makes reference to object masking in the search path which is
due to the same mechanism (in technical terms, lexical scoping with
hierarchically nested environments).</p>
<p>Following this new terminology, the new functions <code class="docutils literal notranslate"><span class="pre">as_data_mask()</span></code>
and <code class="docutils literal notranslate"><span class="pre">new_data_mask()</span></code> replace <code class="docutils literal notranslate"><span class="pre">as_overscope()</span></code> and
<code class="docutils literal notranslate"><span class="pre">new_overscope()</span></code>. <code class="docutils literal notranslate"><span class="pre">as_data_mask()</span></code> has also a more consistent
interface. These functions are only meant for developers of tidy
evaluation interfaces.</p>
</li>
<li><p>We no longer require a data mask (previously called overscope) to be
cleaned up after evaluation. <code class="docutils literal notranslate"><span class="pre">overscope_clean()</span></code> is thus
soft-deprecated without replacement.</p></li>
</ul>
<div class="section" id="id7">
<h3>Breaking changes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">!!</span></code> now binds tightly in order to match intuitive parsing of tidy
eval code, e.g. <code class="docutils literal notranslate"><span class="pre">!!</span> <span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">y</span></code> is now equivalent to <code class="docutils literal notranslate"><span class="pre">(!!</span> <span class="pre">x)</span> <span class="pre">&gt;</span> <span class="pre">y</span></code>.  A
corollary of this new syntax is that you now have to be explicit
when you want to unquote the whole expression on the right of <code class="docutils literal notranslate"><span class="pre">!!</span></code>.
For instance you have to explicitly write <code class="docutils literal notranslate"><span class="pre">!!</span> <span class="pre">(x</span> <span class="pre">&gt;</span> <span class="pre">y)</span></code> to unquote
<code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">y</span></code> rather than just <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UQ()</span></code>, <code class="docutils literal notranslate"><span class="pre">UQS()</span></code> and <code class="docutils literal notranslate"><span class="pre">:=</span></code> now issue an error when called
directly. The previous definitions caused surprising results when
the operators were invoked in wrong places (i.e. not in quasiquoted
arguments).</p></li>
<li><p>The prefix form <code class="docutils literal notranslate"><span class="pre">`!!`()</span></code> is now an alias to <code class="docutils literal notranslate"><span class="pre">!!</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">UQE()</span></code>. This makes it more in line with regular R syntax where
operators are parsed as regular calls, e.g. <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">b</span></code> is parsed as <code class="docutils literal notranslate"><span class="pre">`+`(a,</span> <span class="pre">b)</span></code> and both forms are completely equivalent. Also the
prefix form <code class="docutils literal notranslate"><span class="pre">`!!!`()</span></code> is now equivalent to <code class="docutils literal notranslate"><span class="pre">!!!</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UQE()</span></code> is now deprecated in order to simplify the syntax of
quasiquotation. Please use <code class="docutils literal notranslate"><span class="pre">!!</span> <span class="pre">get_expr(x)</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expr_interp()</span></code> now returns a formula instead of a quosure when
supplied a formula.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_quosureish()</span></code> and <code class="docutils literal notranslate"><span class="pre">as_quosureish()</span></code> are deprecated. These
functions assumed that quosures are formulas but that is only an
implementation detail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new_cnd()</span></code> is now <code class="docutils literal notranslate"><span class="pre">cnd()</span></code> for consistency with other constructors.
Also, <code class="docutils literal notranslate"><span class="pre">cnd_error()</span></code>, <code class="docutils literal notranslate"><span class="pre">cnd_warning()</span></code> and <code class="docutils literal notranslate"><span class="pre">cnd_message()</span></code> are now
<code class="docutils literal notranslate"><span class="pre">error_cnd()</span></code>, <code class="docutils literal notranslate"><span class="pre">warning_cnd()</span></code> and <code class="docutils literal notranslate"><span class="pre">message_cnd()</span></code> to follow our
naming scheme according to which the type of output is a suffix
rather than a prefix.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_node()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> for calls as well and <code class="docutils literal notranslate"><span class="pre">is_pairlist()</span></code>
does not return <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> for <code class="docutils literal notranslate"><span class="pre">NULL</span></code> objects. Use <code class="docutils literal notranslate"><span class="pre">is_node_list()</span></code> to
determine whether an object either of type <code class="docutils literal notranslate"><span class="pre">pairlist</span></code> or <code class="docutils literal notranslate"><span class="pre">NULL</span></code>.
Note that all these functions are still experimental.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_names()</span></code> no longer automatically splices lists of character
vectors as we are moving away from automatic splicing semantics.</p></li>
</ul>
</div>
<div class="section" id="upcoming-breaking-changes">
<h3>Upcoming breaking changes<a class="headerlink" href="#upcoming-breaking-changes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Calling the functional forms of unquote operators with the rlang
namespace qualifier is soft-deprecated. <code class="docutils literal notranslate"><span class="pre">UQ()</span></code> and <code class="docutils literal notranslate"><span class="pre">UQS()</span></code> are not
function calls so it does not make sense to namespace them.
Supporting namespace qualifiers complicates the implementation of
unquotation and is misleading as to the nature of unquoting (which
are syntactic operators at quotation-time rather than function calls
at evaluation-time).</p></li>
<li><p>We are now questioning <code class="docutils literal notranslate"><span class="pre">UQ()</span></code> and <code class="docutils literal notranslate"><span class="pre">UQS()</span></code> as functional forms of
<code class="docutils literal notranslate"><span class="pre">!!</span></code>.  If <code class="docutils literal notranslate"><span class="pre">!!</span></code> and <code class="docutils literal notranslate"><span class="pre">!!!</span></code> were native R operators, they would parse
to the functional calls <code class="docutils literal notranslate"><span class="pre">`!!`()</span></code> and <code class="docutils literal notranslate"><span class="pre">`!!!`()</span></code>. This is now
the preferred way to unquote with a function call rather than with
the operators. We haven’t decided yet whether we will deprecate
<code class="docutils literal notranslate"><span class="pre">UQ()</span></code> and <code class="docutils literal notranslate"><span class="pre">UQS()</span></code> in the future. In any case we recommend using the
new functional forms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parse_quosure()</span></code> and <code class="docutils literal notranslate"><span class="pre">parse_quosures()</span></code> are soft-deprecated in
favour of <code class="docutils literal notranslate"><span class="pre">parse_quo()</span></code> and <code class="docutils literal notranslate"><span class="pre">parse_quos()</span></code>. These new names are
consistent with the rule that abbreviated suffixes indicate the
return type of a function. In addition the new functions require their
callers to explicitly supply an environment for the quosures.</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">f_rhs()</span></code> and <code class="docutils literal notranslate"><span class="pre">f_env()</span></code> on quosures is soft-deprecated. The
fact that quosures are formulas is an implementation detail that
might change in the future. Please use <code class="docutils literal notranslate"><span class="pre">quo_get_expr()</span></code> and
<code class="docutils literal notranslate"><span class="pre">quo_get_env()</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quo_expr()</span></code> is soft-deprecated in favour of <code class="docutils literal notranslate"><span class="pre">quo_squash()</span></code>.
<code class="docutils literal notranslate"><span class="pre">quo_expr()</span></code> was a misnomer because it implied that it was a mere
expression acccessor for quosures whereas it was really a lossy
operation that squashed all nested quosures.</p></li>
<li><p>With the renaming of the <code class="docutils literal notranslate"><span class="pre">lang</span></code> particle to <code class="docutils literal notranslate"><span class="pre">call</span></code>, all these
functions are soft-deprecated: <code class="docutils literal notranslate"><span class="pre">lang()</span></code>, <code class="docutils literal notranslate"><span class="pre">is_lang()</span></code>, <code class="docutils literal notranslate"><span class="pre">lang_fn()</span></code>,
<code class="docutils literal notranslate"><span class="pre">lang_name()</span></code>, <code class="docutils literal notranslate"><span class="pre">lang_args()</span></code>.</p>
<p>In addition, <code class="docutils literal notranslate"><span class="pre">lang_head()</span></code> and <code class="docutils literal notranslate"><span class="pre">lang_tail()</span></code> are soft-deprecated
without replacement because these are low level accessors that are
rarely needed.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_overscope()</span></code> is soft-deprecated in favour of <code class="docutils literal notranslate"><span class="pre">as_data_mask()</span></code>.</p></li>
<li><p>The node setters were renamed from <code class="docutils literal notranslate"><span class="pre">mut_node_</span></code> prefix to
<code class="docutils literal notranslate"><span class="pre">node_poke_</span></code>. This change follows a new naming convention in rlang
where mutation is referred to as “poking”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">splice()</span></code> is now in questioning stage as it is not needed given the
<code class="docutils literal notranslate"><span class="pre">!!!</span></code> operator works in functions taking dots with <code class="docutils literal notranslate"><span class="pre">dots_list()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lgl_len()</span></code>, <code class="docutils literal notranslate"><span class="pre">int_len()</span></code> etc have been soft-deprecated and renamed
with <code class="docutils literal notranslate"><span class="pre">new_</span></code> prefix, e.g. <code class="docutils literal notranslate"><span class="pre">new_logical()</span></code> and <code class="docutils literal notranslate"><span class="pre">new_integer()</span></code>. This
is for consistency with other non-variadic object constructors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ll()</span></code> is now an alias to <code class="docutils literal notranslate"><span class="pre">list2()</span></code>. This is consistent with the new
<code class="docutils literal notranslate"><span class="pre">call2()</span></code> constructor for calls. <code class="docutils literal notranslate"><span class="pre">list2()</span></code> and <code class="docutils literal notranslate"><span class="pre">call2()</span></code> are
versions of <code class="docutils literal notranslate"><span class="pre">list()</span></code> and <code class="docutils literal notranslate"><span class="pre">call()</span></code> that support splicing of lists
with <code class="docutils literal notranslate"><span class="pre">!!!</span></code>. <code class="docutils literal notranslate"><span class="pre">ll()</span></code> remains around as a shorthand for users who like
its conciseness.</p></li>
<li><p>Automatic splicing of lists in vector constructors (e.g. <code class="docutils literal notranslate"><span class="pre">lgl()</span></code>,
<code class="docutils literal notranslate"><span class="pre">chr()</span></code>, etc) is now soft-deprecated. Please be explicit with the
splicing operator <code class="docutils literal notranslate"><span class="pre">!!!</span></code>.</p></li>
</ul>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-1-6">
<h1>rlang 0.1.6<a class="headerlink" href="#rlang-0-1-6" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>This is a maintenance release in anticipation of a forthcoming
change to R’s C API (use <code class="docutils literal notranslate"><span class="pre">MARK_NOT_MUTABLE()</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">SET_NAMED()</span></code>).</p></li>
<li><p>New function <code class="docutils literal notranslate"><span class="pre">is_reference()</span></code> to check whether two objects are one
and the same.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-1-4">
<h1>rlang 0.1.4<a class="headerlink" href="#rlang-0-1-4" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">eval_tidy()</span></code> no longer maps over lists but returns them literally.
This behaviour is an overlook from past refactorings and was never
documented.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-1-2">
<h1>rlang 0.1.2<a class="headerlink" href="#rlang-0-1-2" title="Permalink to this headline">¶</a></h1>
<p>This hotfix release makes rlang compatible with the R 3.1 branch.</p>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-1-1">
<h1>rlang 0.1.1<a class="headerlink" href="#rlang-0-1-1" title="Permalink to this headline">¶</a></h1>
<p>This release includes two important fixes for tidy evaluation:</p>
<ul class="simple">
<li><p>Bare formulas are now evaluated in the correct environment in
tidyeval functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enquo()</span></code> now works properly within compiled functions. Before this
release, constants optimised by the bytecode compiler couldn’t be
enquoted.</p></li>
</ul>
<div class="section" id="new-functions">
<h2>New functions:<a class="headerlink" href="#new-functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">new_environment()</span></code> constructor creates a child of the empty
environment and takes an optional named list of data to populate it.
Compared to <code class="docutils literal notranslate"><span class="pre">env()</span></code> and <code class="docutils literal notranslate"><span class="pre">child_env()</span></code>, it is meant to create
environments as data structures rather than as part of a scope
hierarchy.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">new_call()</span></code> constructor creates calls out of a callable
object (a function or an expression) and a pairlist of arguments. It
is useful to avoid costly internal coercions between lists and
pairlists of arguments.</p></li>
</ul>
</div>
<div class="section" id="ui-improvements">
<h2>UI improvements:<a class="headerlink" href="#ui-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">env_child()</span></code>’s first argument is now <code class="docutils literal notranslate"><span class="pre">.parent</span></code> instead of <code class="docutils literal notranslate"><span class="pre">parent</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mut_</span></code> setters like <code class="docutils literal notranslate"><span class="pre">mut_attrs()</span></code> and environment helpers like
<code class="docutils literal notranslate"><span class="pre">env_bind()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_unbind()</span></code> now return their (modified) input
invisibly. This follows the tidyverse convention that functions
called primarily for their side effects should return their input
invisibly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_pairlist()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> for <code class="docutils literal notranslate"><span class="pre">NULL</span></code>. We added <code class="docutils literal notranslate"><span class="pre">is_node()</span></code>
to test for actual pairlist nodes. In other words, <code class="docutils literal notranslate"><span class="pre">is_pairlist()</span></code>
tests for the data structure while <code class="docutils literal notranslate"><span class="pre">is_node()</span></code> tests for the type.</p></li>
</ul>
</div>
<div class="section" id="id8">
<h2>Bugfixes:<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">env()</span></code> and <code class="docutils literal notranslate"><span class="pre">env_child()</span></code> can now get arguments whose names start
with <code class="docutils literal notranslate"><span class="pre">.</span></code>.  Prior to this fix, these arguments were partial-matching
on <code class="docutils literal notranslate"><span class="pre">env_bind()</span></code>’s <code class="docutils literal notranslate"><span class="pre">.env</span></code> argument.</p></li>
<li><p>The internal <code class="docutils literal notranslate"><span class="pre">replace_na()</span></code> symbol was renamed to avoid a collision
with an exported function in tidyverse. This solves an issue
occurring in old versions of R prior to 3.3.2 (#133).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="rlang-0-1-0">
<h1>rlang 0.1.0<a class="headerlink" href="#rlang-0-1-0" title="Permalink to this headline">¶</a></h1>
<p>Initial release.</p>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./renv\library\R-4.1\x86_64-w64-mingw32\rlang"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Zhentao Shi<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>